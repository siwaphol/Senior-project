function amzn_ads(e){"use strict";try{amznads.updateAds(e)}catch(a){try{console.log("amzn_ads: "+a)}catch(t){}}}function aax_render_ad(e){var a=e.html;document.write(a)}var amzn_console=function(){"use strict";var e={};return e.log=function(){},e}();window.console&&(amzn_console=window.console);var amznads=function(e,a,t,n){"use strict";var o="https:"===a.location.protocol;return e.protocol=o?"https://":"http://",e.host="aax.amazon-adsystem.com",e.dtb_svc="/e/dtb/bid",e.pb_svc="/x/getad",e.debug_mode=e.debug_mode||!1,e.tasks=e.tasks||[],e.log=function(e){try{n.log(e)}catch(a){}},e.debug_mode&&e.log("Initiating amznads"),e.ads||(e.ads={}),e.updateAds=function(a){e.ads=a.ads,e.debug_mode&&e.log("Updated ads. Executing rest of the task queue"),e.doAllTasks(),e.tasks.push=function(a){e.doTask(a)}},e.saveAds=function(a){e.saved_ads=a.ads,e.updateAds(a)},e.getAdForSlot=function(n,o,s){e.src_id=n;var d=d||{},r=d.u;if(!r){r=encodeURIComponent(a.documentURI);try{r=encodeURIComponent(t.top.location.href)}catch(g){}}r&&-1!==r.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.debug_mode&&e.log("amznads.getAdForSlot: Using url="+r);var c="src="+e.src_id+"&slot_uuid="+o+"&c=100"+"&u="+r+"&cb="+Math.round(1e7*Math.random()),i=e.protocol+e.host+e.pb_svc+"?"+c;if(e.debug_mode&&e.log("amznads.getAdAdForSlot: "+(s?"Async ":"")+"Call to: "+i),s){var u=a.createElement("script");u.type="text/javascript",u.async=!0,u.src=i;var m=a.getElementsByTagName("script")[0];m.parentNode.insertBefore(u,m)}else a.write("<script type='text/javascript' src='"+i+"'></script>"),a.close()},e.getAdsAsync=function(a,t,n){e.getAds(a,t,n,!0)},e.getAds=function(n,o,s,d){e.src_id=n;var s=s||{},r=s.u,g=s.d;if(!r){r=encodeURIComponent(a.documentURI);try{r=encodeURIComponent(t.top.location.href)}catch(c){}}if(r&&-1!==r.indexOf("amzn_debug_mode")&&(e.debug_mode=!0),e.ads&&(e.debug_mode&&e.log("amznads.getAds(): clear out existing ads"),e.ads={}),e.saved_ads&&(e.ads=e.saved_ads),g)try{a.domain=g,e.debug_mode&&e.log("amznads.getAds(): Using domain="+g)}catch(i){e.debug_mode&&e.log("amznads.getAds(): Unable to override document domain with '"+g+"'; exception="+i)}e.debug_mode&&e.log("amznads.getAds(): Using url="+r);var u="src="+n+"&u="+r+"&cb="+Math.round(1e7*Math.random());o&&(u+="&sz="+o);var m=e.protocol+e.host+e.dtb_svc+"?"+u;if(e.debug_mode&&e.log("amznads.getAds: "+(d?"Async ":"")+"Call to: "+m),d){var l=a.createElement("script");l.type="text/javascript",l.async=!0,l.src=m;var p=a.getElementsByTagName("script")[0];p.parentNode.insertBefore(l,p)}else a.write("<script type='text/javascript' src='"+m+"'></script>"),a.close()},e.renderAd=function(a,t){if(e.debug_mode&&e.log("amznads.renderAd: key="+t+"; ad-tag="+e.ads[t]),e.ads[t])a.write(e.ads[t]),a.close();else{var n=new Object;n.c="dtb",n.src=e.src_id,n.kvmismatch=1,n.pubReturnedKey=t,n.aaxReturnedKeys=e.getTokens(),n.cb=Math.round(1e7*Math.random());try{n.u=encodeURIComponent(location.host+location.pathname),navigator&&(n.ua=encodeURIComponent(navigator.userAgent))}catch(o){}var s=encodeURIComponent(JSON.stringify(n)),d=e.protocol+e.host+"/x/px/p/0/"+s;e.debug_mode&&e.log("amznads.renderAd: keyValueMismatch detected, pubReturnedKey="+t+", aaxReturnedKeys="+e.getTokens()),a.write("<img src='"+d+"'/>"),a.close()}},e.hasAds=function(a){var t;if(!a)try{return Object.keys(e.ads).length>0}catch(n){e.debug_mode&&e.log("amznads.hasAds: looks like IE 8 (and below): "+n);for(t in e.ads)if(e.ads.hasOwnProperty(t))return!0}for(t in e.ads)if(e.ads.hasOwnProperty(t)&&t.indexOf(a)>0)return!0;return!1},e.setTargeting=function(a,t){var n;for(n in e.ads)if(e.ads.hasOwnProperty(n)){if(t&&n.indexOf(t)<0)continue;a(n,"1")}},e.setTargetingForGPTAsync=function(a){try{if(a){var t=e.getTokens();"undefined"!=typeof t&&t.length>0&&googletag.cmd.push(function(){googletag.pubads().setTargeting(a,t)})}else{var n;for(n in e.ads)e.ads.hasOwnProperty(n)&&!function(){var a=n;e.debug_mode&&e.log("amznads.setTargetingForGPTAsync: pushing localKey="+a),googletag.cmd.push(function(){amznads.debug_mode&&amznads.log("amznads.setTargetingForGPTAsync: localKey="+a),googletag.pubads().setTargeting(a,"1")})}()}e.debug_mode&&e.log("amznads.setTargetingForGPTAsync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(o){e.debug_mode&&e.log("amznads.setTargetingForGPTAsync: ERROR - "+o)}},e.setTargetingForGPTSync=function(a){try{if(a){var t=e.getTokens();"undefined"!=typeof t&&t.length>0&&googletag.pubads().setTargeting(a,t)}else{var n;for(n in e.ads)e.ads.hasOwnProperty(n)&&googletag.pubads().setTargeting(n,"1")}e.debug_mode&&e.log("amznads.setTargetingForGPTSync: Completed successfully. Number of ads returned by Amazon: "+Object.keys(e.ads).length)}catch(o){e.debug_mode&&e.log("amznads.setTargetingForGPTSync: ERROR - "+o)}},e.appendTargetingToAdServerUrl=function(a){var t=a;try{-1===a.indexOf("?")&&(a+="?");var n;for(n in e.ads)e.ads.hasOwnProperty(n)&&(a+="&"+n+"=1");e.debug_mode&&e.log("amznads.appendTargetingToAdServerUrl: Completed successfully. Number of ads returned by Amazon: "+e.ads.length)}catch(o){e.debug_mode&&e.log("amznads.appendTargetingToAdServerUrl: ERROR - "+o)}return e.debug_mode&&e.log("amznads.appendTargetingToAdServerUrl: input url: "+t+"\nreturning url: "+a),a},e.appendTargetingToQueryString=function(a){var t=a;try{var n;for(n in e.ads)e.ads.hasOwnProperty(n)&&(a+="&"+n+"=1")}catch(o){e.debug_mode&&e.log("amznads.appendTargetingToQueryString: ERROR - "+o)}return e.debug_mode&&e.log("amznads.appendTargetingToQueryString: input query-string:"+t+"\nreturning query-string:"+a),a},e.getTokens=function(a){var t,n=[];try{for(t in e.ads)if(e.ads.hasOwnProperty(t)){if(a&&t.indexOf(a)<0)continue;n.push(t)}}catch(o){e.debug_mode&&e.log("amznads.getTokens: ERROR - "+o)}return e.debug_mode&&e.log("amznads.getTokens: returning tokens = "+n),n},e.getKeys=e.getTokens,e.doAllTasks=function(){for(;e.tasks.length>0;){var a=e.tasks.shift();e.doTask(a)}},e.doTask=function(a){try{a.call()}catch(t){e.debug_mode&&e.log("Failed calling task: "+t)}},e.tryGetAdsAsync=function(){e.asyncParams&&e.getAdsAsync(e.asyncParams.id,e.asyncParams.size,e.asyncParams.data)},e}(amznads||{},document,window,amzn_console);amznads.tryGetAdsAsync(),window.amzn_ads=amzn_ads,window.amznads=amznads;