<!DOCTYPE html>
<html lang="en"><head profile="http://gmpg.org/xfn/11">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>  Simple Single Sign-On for PHP (Ajax compatible) - Jasny · web development</title>
	
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
	<meta name="description" content="Helping you out with PHP, MySQL &amp; Javascript">
	<meta name="generator" content="WordPress 3.9.2">
	
	<link rel="stylesheet" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/style.css" type="text/css" media="screen">
	<!--[if IE 7]>
		<link rel="stylesheet" href="http://www.jasny.net/wp-content/themes/alliswell-min-theme-c53cba0/css/ie7.css" type="text/css" media="screen" />
	<![endif]-->
	<!--[if IE 6]>
		<link rel="stylesheet" href="http://www.jasny.net/wp-content/themes/alliswell-min-theme-c53cba0/css/ie6.css" type="text/css" media="screen" />
	<![endif]-->
	<link rel="stylesheet" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/print.css" type="text/css" media="print">
	<link rel="alternate" type="application/rss+xml" href="http://www.jasny.net/feed/" title="Jasny · web development RSS Feed">
	<link rel="alternate" type="application/rss+xml" href="http://www.jasny.net/comments/feed/" title="Jasny · web development Comments RSS Feed">
	<link rel="pingback" href="http://www.jasny.net/xmlrpc.php">

<!-- BEGIN Metadata added by Add-Meta-Tags WordPress plugin -->
<meta name="description" content="This article explains a no-nonse 400 lines of code example of implementing single sign-on (SSO) using PHP. It even works with AJAX.">
<meta name="keywords" content="authentication, php, web frontend, top">
<meta name="wot-verification" content="9bb91ec8a30fda0ac9bd">
<link rel="copyright" type="text/html" title="Jasny · web development Copyright Information" href="http://www.jasny.net/copy-freely/">
<!-- END Metadata added by Add-Meta-Tags WordPress plugin -->


            <script src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/page.js" async="" type="text/javascript"></script><script src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/ga.js" async="" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
            // Google Analytics for WordPress by Yoast v4.3.5 | http://yoast.com/wordpress/google-analytics/
            var _gaq = _gaq || [];
            _gaq.push(['_setAccount', 'UA-25274509-1']);
				            _gaq.push(['_trackPageview']);
            (function () {
                var ga = document.createElement('script');
                ga.type = 'text/javascript';
                ga.async = true;
                ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';

                var s = document.getElementsByTagName('script')[0];
                s.parentNode.insertBefore(ga, s);
            })();
            //]]></script>
			<link rel="alternate" type="application/rss+xml" title="Jasny · web development » Simple Single Sign-On for PHP (Ajax compatible) Comments Feed" href="http://www.jasny.net/articles/simple-single-sign-on-for-php/feed/">
<link rel="stylesheet" id="bwp-syntax-css" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/bwp-syntax.css" type="text/css" media="all">
<link rel="stylesheet" id="A2A_SHARE_SAVE-css" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/addtoany.css" type="text/css" media="all">
<link rel="stylesheet" id="wp-author-bio-css" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/wp-about-author.css" type="text/css" media="all">
<script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/jquery.js"></script>
<script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/jquery-migrate.js"></script>
<script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/bwp-syntax.js"></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://www.jasny.net/xmlrpc.php?rsd">
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://www.jasny.net/wp-includes/wlwmanifest.xml"> 
<link rel="prev" title="The Fellowship of the Ring" href="http://www.jasny.net/articles/the-fellowship-of-the-ring/">
<link rel="next" title="Bye bye MySQL?" href="http://www.jasny.net/articles/bye-bye-mysql/">
<meta name="generator" content="WordPress 3.9.2">
<link rel="canonical" href="http://www.jasny.net/articles/simple-single-sign-on-for-php/">
<link rel="shortlink" href="http://www.jasny.net/?p=168">

<script type="text/javascript"><!--
var a2a_config=a2a_config||{},wpa2a={done:false,html_done:false,script_ready:false,script_load:function(){var a=document.createElement('script'),s=document.getElementsByTagName('script')[0];a.type='text/javascript';a.async=true;a.src='http://static.addtoany.com/menu/page.js';s.parentNode.insertBefore(a,s);wpa2a.script_load=function(){};},script_onready:function(){if(a2a.type=='page'){wpa2a.script_ready=true;if(wpa2a.html_done)wpa2a.init();}},init:function(){for(var i=0,el,target,targets=wpa2a.targets,length=targets.length;i<length;i++){el=document.getElementById('wpa2a_'+(i+1));target=targets[i];a2a_config.linkname=target.title;a2a_config.linkurl=target.url;if(el){a2a.init('page',{target:el});el.id='';}wpa2a.done=true;}wpa2a.targets=[];}};a2a_config.tracking_callback=['ready',wpa2a.script_onready];
//--></script>
<link rel="stylesheet" type="text/css" href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/recaptcha.css"><!-- All in one Favicon 4.3 --><link rel="icon" href="http://www.jasny.net/wp-content/uploads/logo-only-rotated-100x100.png" type="image/png">
<script src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/ViXvvn6WvGm7h5LRRVPURJjrzxLS8DBt5ZKDB-JaL0A.js" charset="UTF-8" type="text/javascript"></script><style type="text/css">.recaptchatable td img{display:block}.recaptchatable .recaptcha_r1_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') 0 -63px no-repeat;width:318px;height:9px}.recaptchatable .recaptcha_r2_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -18px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r2_c2{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -27px 0 no-repeat;width:9px;height:57px}.recaptchatable .recaptcha_r3_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') 0 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r3_c2{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -18px -57px no-repeat;width:300px;height:6px}.recaptchatable .recaptcha_r3_c3{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -9px 0 no-repeat;width:9px;height:63px}.recaptchatable .recaptcha_r4_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -43px 0 no-repeat;width:171px;height:49px}.recaptchatable .recaptcha_r4_c2{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -36px 0 no-repeat;width:7px;height:57px}.recaptchatable .recaptcha_r4_c4{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -214px 0 no-repeat;width:97px;height:57px}.recaptchatable .recaptcha_r7_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -43px -49px no-repeat;width:171px;height:8px}.recaptchatable .recaptcha_r8_c1{background:url('http://www.google.com/recaptcha/api/img/blackglass/sprite.png') -43px -49px no-repeat;width:25px;height:8px}.recaptchatable .recaptcha_image_cell center img{height:57px}.recaptchatable .recaptcha_image_cell center{height:57px}.recaptchatable .recaptcha_image_cell{background-color:white;height:57px}#recaptcha_area,#recaptcha_table{width:318px!important}.recaptchatable,#recaptcha_area tr,#recaptcha_area td,#recaptcha_area th{margin:0!important;border:0!important;padding:0!important;border-collapse:collapse!important;vertical-align:middle!important}.recaptchatable *{margin:0;padding:0;border:0;font-family:helvetica,sans-serif;font-size:8pt;color:black;position:static;top:auto;left:auto;right:auto;bottom:auto}.recaptchatable #recaptcha_image{position:relative;margin:auto}.recaptchatable #recaptcha_image #recaptcha_challenge_image{display:block}.recaptchatable #recaptcha_image #recaptcha_ad_image{display:block;position:absolute;top:0}.recaptchatable img{border:0!important;margin:0!important;padding:0!important}.recaptchatable a,.recaptchatable a:hover{cursor:pointer;outline:none;border:0!important;padding:0!important;text-decoration:none;color:blue;background:none!important;font-weight:normal}.recaptcha_input_area{position:relative!important;width:153px!important;height:45px!important;margin-left:7px!important;margin-right:7px!important;background:none!important}.recaptchatable label.recaptcha_input_area_text{margin:0!important;padding:0!important;position:static!important;top:auto!important;left:auto!important;right:auto!important;bottom:auto!important;background:none!important;height:auto!important;width:auto!important}.recaptcha_theme_red label.recaptcha_input_area_text,.recaptcha_theme_white label.recaptcha_input_area_text{color:black!important}.recaptcha_theme_blackglass label.recaptcha_input_area_text{color:white!important}.recaptchatable #recaptcha_response_field{width:153px!important;position:relative!important;bottom:7px!important;padding:0!important;margin:15px 0 0 0!important;font-size:10pt}.recaptcha_theme_blackglass #recaptcha_response_field,.recaptcha_theme_white #recaptcha_response_field{border:1px solid gray}.recaptcha_theme_red #recaptcha_response_field{border:1px solid #cca940}.recaptcha_audio_cant_hear_link{font-size:7pt;color:black}.recaptchatable{line-height:1!important}#recaptcha_instructions_error{color:red!important}.recaptcha_only_if_privacy{float:right;text-align:right}#recaptcha-ad-choices{position:absolute;height:15px;top:0;right:0}#recaptcha-ad-choices img{height:15px}.recaptcha-ad-choices-collapsed{width:30px;height:15px;display:block}.recaptcha-ad-choices-expanded{width:75px;height:15px;display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-collapsed{display:none}#recaptcha-ad-choices:hover .recaptcha-ad-choices-expanded{display:block}

.recaptcha_is_showing_audio .recaptcha_only_if_image,.recaptcha_isnot_showing_audio .recaptcha_only_if_audio,.recaptcha_had_incorrect_sol .recaptcha_only_if_no_incorrect_sol,.recaptcha_nothad_incorrect_sol .recaptcha_only_if_incorrect_sol{display:none !important}</style><style type="text/css">.a2a_menu, .a2a_menu * { -moz-box-sizing:content-box;-webkit-box-sizing:content-box;box-sizing:content-box;float:none;margin:0;padding:0;height:auto;width:auto;}.a2a_menu { border-radius: 6px;display:none;direction:ltr;background:#FFF;font: 14px Arial,Helvetica,sans-serif;color:#000;line-height:12px;border: 1px solid #CCC;vertical-align:baseline;overflow:hidden;}.a2a_mini {min-width:200px;position:absolute;width: 300px;z-index:9999997;}.a2a_overlay {display: none;background: #CCC; _height: expression( ((e=document.documentElement.clientHeight)?e:document.body.clientHeight)+"px" ); _width: expression( ((e=document.documentElement.clientWidth)?e:document.body.clientWidth)+"px" ); filter: alpha(opacity=50); opacity: .7;position: fixed;_position: absolute; top: 0;right: 0;left: 0;bottom: 0;z-index: 9999998;-webkit-animation: a2aFadeInOverlay .14s ease-out;animation: a2aFadeInOverlay .14s ease-out;}.a2a_full {background: #FFF;height: auto;height: calc(320px);top: 15%;_top: expression(40+((e=document.documentElement.scrollTop)?e:document.body.scrollTop)+"px"); left: 50%;margin-left: -320px; position: fixed;_position: absolute; text-align: center;width: 640px;z-index: 9999999; -webkit-animation: a2aFadeIn .14s ease-in;    animation: a2aFadeIn .14s ease-in;}.a2a_full_header,.a2a_full_services,.a2a_full_footer {border: 0;margin: 0;padding: 12px;box-sizing: border-box;}.a2a_full_header {padding-bottom: 8px;}.a2a_full_services {height: 280px; overflow-y: scroll;padding: 0 12px;-webkit-overflow-scrolling: touch;}.a2a_full_services .a2a_i {display: inline-block;float: none;width: 181px;width: calc(33.334% - 18px);}div.a2a_full_footer {font-size: 9px;text-align: center;padding: 6px 12px;}div.a2a_full_footer a,div.a2a_full_footer a:visited {display: inline;font-size: 9px;padding: 6px 12px; }div.a2a_full_footer a:hover {background: none;border: 0;color: #0166FF;}div.a2a_full_footer a span.a2a_i_a2a_sm {display: inline-block;padding-left: 14px;vertical-align: bottom;}@-webkit-keyframes a2aFadeIn {from { opacity: 0; }  to { opacity: 1; }}@keyframes a2aFadeIn {from { opacity: 0; }  to { opacity: 1; }}@-webkit-keyframes a2aFadeInOverlay {from { opacity: 0; }  to { opacity: .7; }}@keyframes a2aFadeInOverlay {from { opacity: 0; }  to { opacity: .7; }}@media (max-width: 639px) {.a2a_full {top: 15%;left: 0;margin-left: auto;width: 100%;}}@media (min-width: 318px) and (max-width: 437px) {.a2a_full .a2a_full_services .a2a_i {width: calc(50% - 18px);}}@media (max-width: 317px) {.a2a_full .a2a_full_services .a2a_i {width: calc(100% - 18px);}}@media (max-height: 436px) {.a2a_full {bottom: 40px;height: auto;top: 40px;}}.a2a_menu a{color:#0166FF;text-decoration:none;font:14px Arial,Helvetica,sans-serif;line-height:14px;height:auto;width:auto;outline:none;-moz-outline:none;}.a2a_menu a:visited{color:#0166FF}.a2a_menu a:hover,.a2a_menu a:active,.a2a_menu a.a2a_i:focus,.a2a_tabs div:hover{color:#2A2A2A;border:1px solid #EEE;background-color:#EEE;text-decoration:none}.a2a_menu span,.a2a_img{background:url(http://static.addtoany.com/menu/icons.28.png) no-repeat;border:0;display:block;line-height:16px}.a2a_menu span.a2a_i_find { height:16px;left: 8px;position:absolute;top: 7px;width:16px;}.a2a_menu span.a2a_i_find svg {background-color: #FFF;}.a2a_menu span.a2a_i_find svg path {fill: #CCC;}#a2a_menu_container{display:inline-block} #a2a_menu_container{_display:inline} .a2a_menu_title_container {padding: 6px 8px;}.a2a_menu_find_container {border: 1px solid #CCC;border-radius: 6px;padding: 2px 24px 2px 0;position: relative;text-align: left;}.a2a_cols_container{border-bottom-right-radius:8px;border-top-right-radius:8px}.a2a_cols_container .a2a_col1{overflow-x:hidden;overflow-y:auto;-webkit-overflow-scrolling:touch}.a2a_menu input, .a2a_menu input[type="text"]{display:block;background-image:none;box-shadow:none;line-height:100%;margin:0;overflow:hidden;padding:0;-moz-box-shadow:none;-webkit-box-shadow:none;-webkit-appearance:none} .a2a_menu_title_container input.a2a_menu_title {background-color: #FFF;border: 0;color: #2A2A2A;font: inherit;margin: 0;padding: 0;width: 99%;}.a2a_menu_find_container input.a2a_menu_find {background-color: transparent;_background-color: #FFF;border: 0;color: #2A2A2A;font-size: 16px;height: 20px;line-height: 20px;left: 28px;outline: 0;padding: 2px 0;position: relative;width: 99%;}.a2a_clear{clear:both} .a2a_img, .a2a_svg { display:block; overflow:hidden; }.a2a_img{height:16px;line-height:16px;width:16px;}.a2a_svg{height:32px;line-height:32px;width:32px;}.a2a_default_style a{float:left;line-height:16px;padding:0 2px}.a2a_default_style a:hover .a2a_img,.a2a_default_style a:hover .a2a_svg,.a2a_floating_style a:hover .a2a_img,.a2a_floating_style a:hover .a2a_svg { opacity: .7;}.a2a_default_style .a2a_count,.a2a_default_style .a2a_svg, .a2a_floating_style .a2a_svg { border-radius:4px ;} .a2a_default_style .a2a_img, .a2a_default_style .a2a_dd, .a2a_default_style .a2a_svg{float:left}.a2a_default_style .a2a_img_text{margin-right:4px}.a2a_default_style .a2a_divider{border-left:1px solid #000;display:inline;float:left;height:16px;line-height:16px;margin:0 5px}.a2a_kit a{cursor:pointer}.a2a_floating_style { background-color: #fff; border-radius: 6px; padding: 4px; position: fixed; z-index: 9999995; }.a2a_vertical_style a { display: block; padding: 4px; }.a2a_floating_style.a2a_default_style { bottom: 0; }.a2a_floating_style.a2a_default_style a { padding: 4px; }.a2a_count {background-color: #fff;border: 1px solid #ccc;box-sizing: border-box;color: #2a2a2a;display: block;float: left;font: 12px Arial,Helvetica,sans-serif;height: 16px;margin-left: 4px;position: relative;text-align: center;width: 50px;}.a2a_count:before,.a2a_count:after {border: solid transparent;border-width: 4px 4px 4px 0;content: "";height: 0;left: 0;line-height: 0;margin: -4px 0 0 -4px;position: absolute;top: 50%;width: 0;}.a2a_count:before {border-right-color: #ccc;}.a2a_count:after {border-right-color: #fff;margin-left: -3px;}.a2a_count span {-webkit-animation: a2aFadeIn .14s ease-in;    animation: a2aFadeIn .14s ease-in;}.a2a_nowrap{white-space:nowrap}.a2a_note{margin:0 auto;padding:9px;font-size:12px;text-align:center}.a2a_note .a2a_note_note{margin:0;color:#2A2A2A}.a2a_wide a{display:block;margin-top:3px;border:1px solid #EEE;padding:3px;text-align:center}.a2a_tabs{float:left;margin:0 0 3px} .a2a_tabs a,.a2a_tabs div{margin:1px;background-color:#EEE; border:1px solid #EEE; font-size:11px; padding:6px 12px ; white-space:nowrap} .a2a_tabs a span, .a2a_tabs div span{display:inline-block;padding-left:20px;height:auto;width:auto} .a2a_tabs_default a span, .a2a_tabs_default div span{height:auto;max-width:99px;overflow:hidden;padding-left:20px;width:auto;_width:expression(this.clientWidth > 99? "97px" : "auto");}.a2a_tabs a, .a2a_tabs a:visited, .a2a_tabs a:hover, .a2a_tabs div, .a2a_tabs div:hover{cursor:pointer;border-bottom:1px solid #EEE;color:#2A2A2A;border-bottom-left-radius:0;-webkit-border-bottom-left-radius:0;-moz-border-radius-bottomleft:0;border-bottom-right-radius:0;-webkit-border-bottom-right-radius:0;-moz-border-radius-bottomright:0}a.a2a_tab_selected, a.a2a_tab_selected:visited,a.a2a_tab_selected:hover,a.a2a_tab_selected:active,a.a2a_tab_selected:focus, div.a2a_tab_selected,div.a2a_tab_selected:hover{color:#0166FF;background-color:#FFF;border:1px solid #CCC;border-bottom:1px solid #FFF}a.a2a_i,i.a2a_i{display:block;float:left;border:1px solid #FFF;padding:6px 8px;text-align:left;white-space:nowrap;width:132px;}a.a2a_i span, a.a2a_more span {overflow: hidden;padding: 0 0 0 21px;text-overflow: ellipsis;}a.a2a_sss:hover {border-left: 1px solid #CCC;}a.a2a_menu_show_more_less{border-bottom:1px solid #FFF;border-left:0;border-right:0;margin:6px 0 0;padding:6px}a.a2a_menu_show_more_less span{display:inline-block;height:16px;margin:0 auto;vertical-align:bottom;} iframe.a2a_shim {background-color: transparent;border: 0;bottom: 0;filter: alpha(opacity=0); height: 100%;left: 0;right: 0;top: 0;position: absolute;width: 100%;z-index: 9999996;_height: expression( ((e=document.documentElement.clientHeight)?e:document.body.clientHeight)+"px" ); _width: expression( ((e=document.documentElement.clientWidth)?e:document.body.clientWidth)+"px" ); }.a2a_dd img {border:0;-ms-touch-action:manipulation;}iframe[id^="PIN_"][id$="_nag"] {display: none !important;}.a2a_i_a2a{background-position:0 0!important}.a2a_i_a2a_sm{background-position:0 -17px!important}.a2a_i_agregator{background-position:0 -34px!important}.a2a_i_aim{background-position:0 -51px!important}.a2a_i_allvoices{background-position:0 -68px!important}.a2a_i_amazon{background-position:0 -85px!important}.a2a_i_aol{background-position:0 -102px!important}.a2a_i_app_net{background-position:0 -119px!important}.a2a_i_arto{background-position:0 -136px!important}.a2a_i_baidu{background-position:0 -153px!important}.a2a_i_bebo{background-position:0 -170px!important}.a2a_i_bibsonomy{background-position:0 -187px!important}.a2a_i_bitty{background-position:0 -204px!important}.a2a_i_blinklist{background-position:0 -221px!important}.a2a_i_blogger{background-position:0 -238px!important}.a2a_i_bloglines{background-position:0 -255px!important}.a2a_i_blogmarks{background-position:0 -272px!important}.a2a_i_bloomberg_current{background-position:0 -289px!important}.a2a_i_bookmark{background-position:0 -306px!important}.a2a_i_bookmarks_fr{background-position:0 -323px!important}.a2a_i_box{background-position:0 -340px!important}.a2a_i_buddymarks{background-position:0 -357px!important}.a2a_i_buffer{background-position:0 -374px!important}.a2a_i_care2{background-position:0 -391px!important}.a2a_i_chrome{background-position:0 -408px!important}.a2a_i_citeulike{background-position:0 -425px!important}.a2a_i_dailyrotation{background-position:0 -442px!important}.a2a_i_default{background-position:0 -459px!important}.a2a_i_delicious{background-position:0 -476px!important}.a2a_i_designfloat{background-position:0 -493px!important}.a2a_i_diaspora{background-position:0 -510px!important}.a2a_i_digg{background-position:0 -527px!important}.a2a_i_diigo{background-position:0 -544px!important}.a2a_i_dzone{background-position:0 -561px!important}.a2a_i_email{background-position:0 -578px!important}.a2a_i_evernote{background-position:0 -595px!important}.a2a_i_facebook{background-position:0 -612px!important}.a2a_i_fark{background-position:0 -629px!important}.a2a_i_feed{background-position:0 -646px!important}.a2a_i_feedblitz{background-position:0 -663px!important}.a2a_i_feedbucket{background-position:0 -680px!important}.a2a_i_feedly{background-position:0 -697px!important}.a2a_i_feedmailer{background-position:0 -714px!important}.a2a_i_find{background-position:0 -731px!important}.a2a_i_fireant{background-position:0 -748px!important}.a2a_i_firefox{background-position:0 -765px!important}.a2a_i_flipboard{background-position:0 -782px!important}.a2a_i_folkd{background-position:0 -799px!important}.a2a_i_friendfeed{background-position:0 -816px!important}.a2a_i_funp{background-position:0 -833px!important}.a2a_i_gmail{background-position:0 -850px!important}.a2a_i_google{background-position:0 -867px!important}.a2a_i_google_plus{background-position:0 -884px!important}.a2a_i_hatena{background-position:0 -901px!important}.a2a_i_instapaper{background-position:0 -918px!important}.a2a_i_itunes{background-position:0 -935px!important}.a2a_i_jamespot{background-position:0 -952px!important}.a2a_i_jumptags{background-position:0 -969px!important}.a2a_i_khabbr{background-position:0 -986px!important}.a2a_i_kindle{background-position:0 -1003px!important}.a2a_i_klipfolio{background-position:0 -1020px!important}.a2a_i_line{background-position:0 -1037px!important}.a2a_i_linkagogo{background-position:0 -1054px!important}.a2a_i_linkatopia{background-position:0 -1071px!important}.a2a_i_linkedin{background-position:0 -1088px!important}.a2a_i_livejournal{background-position:0 -1105px!important}.a2a_i_mail_ru{background-position:0 -1122px!important}.a2a_i_mendeley{background-position:0 -1139px!important}.a2a_i_meneame{background-position:0 -1156px!important}.a2a_i_miro{background-position:0 -1173px!important}.a2a_i_mixi{background-position:0 -1190px!important}.a2a_i_my_msn{background-position:0 -1207px!important}.a2a_i_myspace{background-position:0 -1224px!important}.a2a_i_netlog{background-position:0 -1241px!important}.a2a_i_netvibes{background-position:0 -1258px!important}.a2a_i_netvouz{background-position:0 -1275px!important}.a2a_i_newsalloy{background-position:0 -1292px!important}.a2a_i_newsisfree{background-position:0 -1309px!important}.a2a_i_newstrust{background-position:0 -1326px!important}.a2a_i_newsvine{background-position:0 -1343px!important}.a2a_i_nowpublic{background-position:0 -1360px!important}.a2a_i_odnoklassniki{background-position:0 -1377px!important}.a2a_i_oknotizie{background-position:0 -1394px!important}.a2a_i_oldreader{background-position:0 -1411px!important}.a2a_i_orkut{background-position:0 -1428px!important}.a2a_i_outlook{background-position:0 -1445px!important}.a2a_i_outlook_com{background-position:0 -1462px!important}.a2a_i_pdf{background-position:0 -1479px!important}.a2a_i_phonefavs{background-position:0 -1496px!important}.a2a_i_pinboard{background-position:0 -1513px!important}.a2a_i_pinterest{background-position:0 -1530px!important}.a2a_i_plurk{background-position:0 -1547px!important}.a2a_i_pocket{background-position:0 -1564px!important}.a2a_i_podnova{background-position:0 -1581px!important}.a2a_i_print{background-position:0 -1598px!important}.a2a_i_printfriendly{background-position:0 -1615px!important}.a2a_i_protopage{background-position:0 -1632px!important}.a2a_i_pusha{background-position:0 -1649px!important}.a2a_i_rapidfeeds{background-position:0 -1666px!important}.a2a_i_reddit{background-position:0 -1683px!important}.a2a_i_rediff{background-position:0 -1700px!important}.a2a_i_segnalo{background-position:0 -1717px!important}.a2a_i_share{background-position:0 -1734px!important}.a2a_i_sina_weibo{background-position:0 -1751px!important}.a2a_i_sitejot{background-position:0 -1768px!important}.a2a_i_slashdot{background-position:0 -1785px!important}.a2a_i_springpad{background-position:0 -1802px!important}.a2a_i_startaid{background-position:0 -1819px!important}.a2a_i_stumbleupon{background-position:0 -1836px!important}.a2a_i_stumpedia{background-position:0 -1853px!important}.a2a_i_symbaloo{background-position:0 -1870px!important}.a2a_i_technotizie{background-position:0 -1887px!important}.a2a_i_thefreedictionary{background-position:0 -1904px!important}.a2a_i_thefreelibrary{background-position:0 -1921px!important}.a2a_i_tuenti{background-position:0 -1938px!important}.a2a_i_tumblr{background-position:0 -1955px!important}.a2a_i_twiddla{background-position:0 -1972px!important}.a2a_i_twitter{background-position:0 -1989px!important}.a2a_i_typepad{background-position:0 -2006px!important}.a2a_i_viadeo{background-position:0 -2023px!important}.a2a_i_vk{background-position:0 -2040px!important}.a2a_i_wanelo{background-position:0 -2057px!important}.a2a_i_webnews{background-position:0 -2074px!important}.a2a_i_whatsapp{background-position:0 -2091px!important}.a2a_i_winksite{background-position:0 -2108px!important}.a2a_i_wists{background-position:0 -2125px!important}.a2a_i_wordpress{background-position:0 -2142px!important}.a2a_i_xerpi{background-position:0 -2159px!important}.a2a_i_xing{background-position:0 -2176px!important}.a2a_i_y18{background-position:0 -2193px!important}.a2a_i_yahoo{background-position:0 -2210px!important}.a2a_i_yim{background-position:0 -2227px!important}.a2a_i_yoolink{background-position:0 -2244px!important}.a2a_i_youmob{background-position:0 -2261px!important}</style><script src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reload" type="text/javascript"></script><link href="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/icons.css" rel="stylesheet"></head>
<body>
<div id="wrapper">
	<div class="menu-main-container"><ul id="menu-main" class="menu"><li id="menu-item-794" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-794"><a href="http://www.jasny.net/">Home</a></li>
<li id="menu-item-795" class="menu-item menu-item-type-post_type menu-item-object-page menu-item-795"><a href="http://www.jasny.net/portfolio/">Portfolio</a></li>
<li id="menu-item-796" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-796"><a href="http://jasny.github.com/">Open source projects</a></li>
<li id="menu-item-797" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-797"><a href="http://www.jasny.net/articles">Articles</a></li>
</ul></div>	<div id="header">
		<h1><a href="http://www.jasny.net/">Jasny <small>· web development</small></a></h1>
		<p class="description">Helping you out with PHP, MySQL &amp; Javascript</p>
	</div><!-- close:header -->	<div id="content">
		<div id="main-content">
					<div class="post" id="post-168">
				<h2>Simple Single Sign-On for PHP (Ajax compatible)</h2>				<span class="date">by Arnold Daniels on 04/18/2009</span>
				<div class="entry">
					<p>Associated websites often share user information, so a visitor 
only has to register once and can use that username and password for all
 sites. A good example for this is Google. You can use you google 
account for GMail, Blogger, iGoogle, google code, etc. This is nice, but
 it would be even nicer if logging in for GMail would mean I’m also 
logged in for the other websites. For that you need to implement <a href="http://en.wikipedia.org/wiki/Single_sign-on" target="_blank">single sign-on</a> (SSO).</p>
<p>There are many single sign-on applications and protocols. Most of 
these are fairly complex. Applications often come with full user 
management solutions. This makes them difficult to integrate. Most 
solutions also don’t work well with AJAX, because redirection is used to
 let the visitor log in at the SSO server.</p>
<p>I’ve written a simple single sign-on solution (400 lines of code), 
which works by linking sessions. This solutions works for normal 
websites as well as AJAX sites.<br>
<span id="more-168"></span></p>
<h2 id="without_sso">Without SSO</h2>
<p>Let’s start with a website that doesn’t have SSO.<br>
<a href="http://www.jasny.net/wp-content/uploads/sso-diagram_no-sso.png"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/sso-diagram_no-sso1-300x252.png" alt="No SSO" title="sso-diagram_no-sso" class="size-medium wp-image-171" height="252" width="300"></a><br>
The client requests the index page. The page requires that the visitor 
is logged in. The server creates a new session and sends redirect to the
 login page. After the visitor has logged in, it displays the index 
page.</p>
<h2 id="how_it_works">How it works</h2>
<p>When using SSO, when can distinguish 3 parties:</p>
<ul>
<li>Client – This is the browser of the visitor</li>
<li>Broker – The website which is visited</li>
<li>Server – The place that holds the user information</li>
</ul>
<p>The broker will talk to the server in name of the client. For that we
 want the broker to use the same session as the client. However the 
client won’t pass the session id which it has at the server, since it’s 
at another domain. Instead the broker will ask the client to pass a 
token to the server. The server uses the token, in combination with a 
secret word, to create a session key which is linked session of the 
client. The broker also know the token and the secret word and can 
therefore generate the same session key, which it uses to proxy 
login/logout commands and request info from the server.</p>
<h2 id="first_visit">First visit</h2>
<p><a href="http://sso-alex.jasny.net/" target="_blank" style="font-size:14px">-&gt; Try it! (jan/jan1)&lt;-</a><br>
<a href="http://www.jasny.net/wp-content/uploads/sso-diagram_alex.png"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/sso-diagram_alex-280x300.png" alt="" title="sso-diagram_alex" class="alignnone size-medium wp-image-175" height="300" width="280"></a><br>
When you visit a broker website, it will check to see if a token cookie 
already exists. It it doesn’t it, the broker sends a redirect to the 
server, giving the command to attach sessions and specifying the broker 
identity, a random token and the originally requested URL. It saves the 
token in a cookie.</p>
<p>The server will generate a session key based on the broker identity, 
the secret word of the broker and the token and link this to the session
 of the client. The session key contains a checksum, so hackers can go 
out and use random session keys to grab session info. The server 
redirects the client back to the original URL. After this, the client 
can talk to the broker, the same way it does when not using SSO.</p>
<p>The client requests the index page at the broker. The page requires 
that the visitor is logged in. The broker generates the session key, 
using the token and the secret word, and request the user information at
 the server. The server responds to the broker that the visitor is not 
logged. The broker redirects the client to the login page.</p>
<p>The client logs in, sending the username and password to the broker. 
The broker sends the username and password to the server, again passing 
the session key. The server returns that login is successful to the 
broker. The broker redirects the client to the index page. For the index
 page, the broker will request the user information from the server.</p>
<h2 id="visiting_another_affiliate">Visiting another affiliate</h2>
<p><a href="http://sso-binck.dutchc5.net/" target="_blank" style="font-size:14px">-&gt; Try it! &lt;-</a><br>
<a href="http://www.jasny.net/wp-content/uploads/sso-diagram_binck.png"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/sso-diagram_binck-300x238.png" alt="" title="sso-diagram_binck" class="alignnone size-medium wp-image-183" height="238" width="300"></a><br>
You visit another broker. It also checks for a token cookie. Since each 
broker is on their own domain, they have different cookies, so no token 
cookie will be found. The broker will redirect to the server attach to 
the user session.</p>
<p>The server attaches a session key generated for this broker, which 
differs from the one for the first broker. It attaches it to the user 
session. This is the same session the first broker used. The server will
 redirect back to the original URL.</p>
<p>The client requests the index page at the broker. The broker will 
request user information from the server. Since the visitor is already 
logged in, the server returns this information. The index page is shown 
to the visitor.</p>
<h2 id="using_ajax_rich_internet_application">Using AJAX / Javascript</h2>
<p><a href="http://sso-ajax.jasny.net/" target="_blank" style="font-size:14px">-&gt; Try it! &lt;-</a><br>
SSO and AJAX / RIA applications often don’t go well together. With this 
type of application, you do not want to leave the page. The application 
is static and you get the data and do all actions through AJAX. 
Redirecting an AJAX call to a different website won’t because of 
cross-site scripting protection within the browser.</p>
<p>With this solution the client only needs to attach the session by 
providing the server with a token generated by the broker. That attach 
request doesn’t return any information. After attaching the client 
doesn’t talk at all to the server any more. Authentication can be done 
as normal.</p>
<p><a href="http://www.jasny.net/wp-content/uploads/sso-diagram_ajax.png"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/sso-diagram_ajax-241x300.png" alt="" title="sso-diagram_ajax" class="alignnone size-medium wp-image-184" height="300" width="241"></a><br>
The client check for the token cookie. It it doesn’t exists, he requests
 the attach URL from the broker. This attach url includes the broker 
name and the token, but not a original request URL. The client will open
 the received url in an &lt;img&gt; and wait until the image is loaded.</p>
<p>The server attaches the browser session key to the user session. When
 it’s done it outputs a PNG image. When this image is received by the 
client, it knows the server has connected the sessions and the broker 
can be used for authentication. The broker will work as a proxy, passing
 commands and requests to the sso server and return results to the 
client.</p>
<h2 id="to_conclude">To conclude</h2>
<p>By connecting sessions, you give the broker the power to act as the 
client. This method can only be used if you trust all brokers involved. 
The login information is send through the broker, which he can easily 
store if the broker has bad intentions.</p>
<p><b><i>Don’t be square, please share!</i></b></p>
<p><b>Demo</b><br>
<a href="http://sso-alex.jasny.net/" target="_blank">Broker ‘Alex’</a><br>
<a href="http://sso-binck.dutchc5.net/" target="_blank">Broker ‘Binck’</a><br>
<a href="http://sso-ajax.jasny.net/" target="_blank">AJAX broker</a> – created by <a href="http://uzza.pl/blog/" target="_blank">Lukasz ‘Uzza’ Lipinski</a> using <a href="http://ajax.org/" target="_blank">Ajax.org PlatForm</a>.</p>
<p>Play around, logging in and out at different brokers. Refresh the other after. Available users:<br>
jan / jan1<br>
peter / peter1<br>
bart / bart1<br>
henk / henk1</p>
<p><b>Download</b><br>
<a href="https://github.com/jasny/SSO/archive/master.zip">Download the code @ github</a><br>
<i>2009-11-16: Updated the software with bugfixes mentioned in comments + alternative for using symlinks.</i></p>
<p>If I overlooked security issues with this SSO implementation, please leave a comment below.</p>
<p>This is a simple implementation of SSO. If you want enterprise stuff have a look at <a href="http://www.novell.com/products/securelogin">Novell Single Sign-On</a>.</p>
<div class="wp-about-author-containter-top" style="background-color:#fff;"><div class="wp-about-author-pic"><img alt="" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/0bba82e8b2a9d2cf9645cb07ea54766f.jpg" class="avatar avatar-100 photo" height="100" width="100"></div><div class="wp-about-author-text" style="margin-left:140px"><h3><a href="http://www.jasny.net/articles/author/admin/" title="Arnold Daniels">Arnold Daniels</a></h3><p>I've
 spend a big part of my life behind a computer, learning about databases
 (MySQL), programming (PHP) and system administration (Linux). Currently
 I playing with HTML5, jquery and node.js.</p><p><a href="http://www.jasny.net/articles/author/admin/" title="More posts by Arnold Daniels">More Posts</a> </p><p class="wpa-nomargin">Follow Me:<br><a class="wpa-social-icons" href="http://www.twitter.com/ArnoldDaniels"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/twitter.png" alt="Twitter"></a><a class="wpa-social-icons" href="http://www.linkedin.com/in/arnolddaniels"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/linkedin.png" alt="LinkedIn"></a></p></div></div><div class="addtoany_share_save_container addtoany_content_bottom"><div style="line-height: 32px;" class="a2a_kit a2a_kit_size_32 addtoany_list a2a_target" id=""><a class="a2a_button_dzone" href="http://www.jasny.net/" title="DZone" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_dzone"></span></a><a class="a2a_button_facebook" href="http://www.jasny.net/" title="Facebook" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_facebook"></span></a><a class="a2a_button_twitter" href="http://www.jasny.net/" title="Twitter" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_twitter"></span></a><a class="a2a_button_google_plus" href="http://www.jasny.net/" title="Google+" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_google_plus"></span></a><a class="a2a_button_linkedin" href="http://www.jasny.net/" title="LinkedIn" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_linkedin"></span></a><a class="a2a_button_email" href="http://www.jasny.net/" title="Email" rel="nofollow" target="_blank"><span class="a2a_svg a2a_s__default a2a_s_email"></span></a>
<script type="text/javascript"><!--
wpa2a.script_load();
//--></script>
</div></div>									</div>
			</div>
		<!-- You can start editing here. -->
	<div id="comments">
		<h3>There are 238 comments in this article:</h3>
		<ol>
					<li id="comment-158662" class="comment ">
								<cite><span class="date">18 April 2009</span><a href="http://www.thebuggenie.com/" rel="external nofollow" class="url">Daniel</a> says:</cite>
				<blockquote>
					<p>Nicely written article. However, I can’t help but feel that you 
are trying to solve the same problem OpenID is solving, just in a 
different way …</p>
<p>Why implement this, when OpenID exists?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-158662", "Daniel")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-158836" class="comment ">
								<cite><span class="date">18 April 2009</span><a href="http://www.linux-wizard.net/" rel="external nofollow" class="url">FACORAT Fabrice</a> says:</cite>
				<blockquote>
					<p>can be useful for someone willing to use SSO in his enterprise, for example between different intranet/extranet solutions.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-158836", "FACORAT Fabrice")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-160527" class="comment ">
								<cite><span class="date">20 April 2009</span><a href="http://www.fabos.cn/" rel="external nofollow" class="url">caleng</a> says:</cite>
				<blockquote>
					<p>now problem</p>
<p>user A and user B use the same pc, user A login but don’t logout, when user B visit this website, then user B use user A cookie.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-160527", "caleng")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-160850" class="comment ">
								<cite><span class="date">20 April 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Daniel:</em></strong> OpenID is shared 
authentication, but not single sign-on. You need to login at each site. 
The difference is explained at wikipedia <a href="http://en.wikipedia.org/wiki/Single_sign-on#Shared_Authentication_Schemes_which_are_not_Single_Sign-On" rel="nofollow">http://en.wikipedia.org/wiki/Single_sign-on#Shared_Authentication_Schemes_which_are_not_Single_Sign-On</a>.<br>
Also with this solution you have all the user information in one place. OpenID is purely authentication only.</p>
<p><strong><em>Caleng:</em></strong> This problem you would also have 
when you don’t do single sign-on, but authenticate at the website as 
normal. Therefore this is not within the problem space of SSO. If you 
already have a way of solving this, you can still apply this when using 
this SSO solution.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-160850", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-188453" class="comment ">
								<cite><span class="date">18 May 2009</span>onge says:</cite>
				<blockquote>
					<p>Is it possible to just take and use (and modify) this solution, or you have some specific licence requirements on in?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-188453", "onge")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-189195" class="comment ">
								<cite><span class="date">19 May 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>The AJAX part of this solution uses Javeline Platform, which is LGPL licensed.</p>
<p>The rest of the software (including all of the PHP code) is in <a href="http://en.wikipedia.org/wiki/Public_domain" rel="nofollow">public domain</a> and can be used freely. enjoy ;)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-189195", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-193293" class="comment ">
								<cite><span class="date">25 May 2009</span>woras says:</cite>
				<blockquote>
					<p>Hi, good tutorial. Based on this one I coded my own SSO server. 
Just one suggestion to yours solution it’s better to store client token 
in session, because cookies on client can be disabled. And it’s a good 
idea to use HTTPS :) between SSO server and Broker
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-193293", "woras")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-193989" class="comment ">
								<cite><span class="date">26 May 2009</span><a href="http://www.argohost.net/" rel="external nofollow" class="url">Hermes Alves</a> says:</cite>
				<blockquote>
					<p>Great tutorial! Thanxs ;)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-193989", "Hermes Alves")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-199016" class="comment ">
								<cite><span class="date">10 June 2009</span>Stefan says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>first of all, thanks for the nice tutorial.<br>
Nevertheless, I do have a question. In the source code I came across the
 checksum generating functions and figured that you are using the 
$_SERVER['REMOTE_ADDR'] var for that. Now my question is: Why? Doesn’t 
that prevent cross-server-SSO-solutions?</p>
<p>Thanks,<br>
Stefan.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-199016", "Stefan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-199107" class="comment ">
								<cite><span class="date">11 June 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi Stefan,</p>
<p>$_SERVER['REMOTE_ADDR'] is the IP address of the client. It is used to prevent <a href="http://en.wikipedia.org/wiki/Session_hijacking" rel="nofollow">session hijacking</a>. It doesn’t ruin cross-server SSO.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-199107", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-200192" class="comment ">
								<cite><span class="date">23 June 2009</span>Thanh says:</cite>
				<blockquote>
					<p>Hi !<br>
I can’t setup server SSO. Server error. Can You send full source code and guide detail about SSO ?<br>
Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-200192", "Thanh")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-200490" class="comment ">
								<cite><span class="date">26 June 2009</span>Ram says:</cite>
				<blockquote>
					<p>Hi,</p>
<p>Iam getting curl_init() error , when iam using download files of SSO   are using in local system.</p>
<p>Please help me.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-200490", "Ram")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-200522" class="comment ">
								<cite><span class="date">26 June 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Ram, are you sure that you have the curl extension? If so, post the exact PHP error and we’ll have a look.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-200522", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-200977" class="comment ">
								<cite><span class="date">1 July 2009</span>Rosa says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels!<br>
I can’t setup SSO. I have an error:<br>
Fatal error: Uncaught exception ‘Exception’ with message ‘SSO failure: 
Not attached’ in C:\AppServ\www\SSO\broker\sso.php:161 Stack trace: #0 
C:\AppServ\www\SSO\broker\index.php(5): 
SingleSignOn_Broker-&gt;getInfo() #1 {main} thrown in 
C:\AppServ\www\SSO\broker\sso.php on line 161</p>
<p>I use Apache server &amp; PHP 5.2.6. Please help me fix it.</p>
<p>Thanks so much.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-200977", "Rosa")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-201025" class="comment ">
								<cite><span class="date">1 July 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi Rosa,</p>
<p>This won’t work on Windows since it uses symlinks. You could make it 
work on Windows by rewriting server/sso.php to work without symlinks. 
Look at lines 132/133 and function sessionStart().</p>
<p>I’m sorry I can’t help you any further. Good luck.<br>
- Arnold
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-201025", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-201518" class="comment ">
								<cite><span class="date">6 July 2009</span>Rosa says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels,<br>
- I fixed error above by change row 205 in borker/sso.php:<br>
CURLOPT_COOKIE -&gt; CURLOPT_COOKIESESSION.Is it OK?<br>
- Now I get a error at value $sso-&gt;getInfo(). When log-in, value 
$sso-&gt;getInfo() in login.php is Array but it redirect index.php by 
header function (row 9 at login.php), $sso-&gt;getInfo() is Blank. So I 
can’t log-in successful.Why $sso-&gt;getInfo() is don’t save???</p>
<p>Can you help me check it? I only change your code as above.<br>
Thanks,<br>
Rosa
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-201518", "Rosa")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-201559" class="comment ">
								<cite><span class="date">6 July 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi Rosa,</p>
<p>No that is not right at all. The issue is not with the broker, so 
there is no need to change that code. You’re not not getting the 
previous error because the broker isn’t working correctly anymore.</p>
<p>At line 132/133 of server/sso.php the program creates a symlink. 
Since Windows doesn’t support symlinks, the broker session id is not 
being attached (=symlinked to) to the client session id.</p>
<p>You need to replace the use of symlinks by an alternative solution. 
For instance you can create a file with the name of the broker session 
id and write the client session id in it. In function sessionStart() you
 than need to readout that file and use it as session id. Something 
like:</p>
<pre lang="php">$client_session = file_get_contents($broker_session_file);
session_id($client_session);
session_start();</pre>
<p>This really is all the support I’m willing to give on this matter. Otherwise please switch to a linux based system.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-201559", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-202280" class="comment ">
								<cite><span class="date">13 July 2009</span><a href="http://www.ramanandi.org/" rel="external nofollow" class="url">sudhir</a> says:</cite>
				<blockquote>
					<p>This exactly what I was looking for my site <a href="http://www.ramanandi.org/" rel="nofollow">http://www.ramanandi.org</a> .</p>
<p>I have a social network and a matrimonial site, I use symfony, and I 
need to share the userbase and a central authentication system.</p>
<p>I think, it would be really helpful</p>
<p>Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-202280", "sudhir")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-202892" class="comment ">
								<cite><span class="date">20 July 2009</span>yancey says:</cite>
				<blockquote>
					<p>Thanks for your good sample.<br>
It’s work fine , but don’t know why I can’t use session_start()<br>
on my page !?<br>
It will bring out crash , is it normal situation ?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-202892", "yancey")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-202910" class="comment ">
								<cite><span class="date">20 July 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>A program should never crash, so that is not normal.<br>
(I’ll talk to yancey and add comments if that is useful)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-202910", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-203602" class="comment ">
								<cite><span class="date">28 July 2009</span>Bab says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels!<br>
I can’t setup SSO. I have an error:</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: ‘ in /var/www/SSO/broker/sso.php:161 Stack trace: #0 
/var/www/SSO/broker/index.php(5): SingleSignOn_Broker-&gt;getInfo() #1 
{main} thrown in /var/www/SSO/broker/sso.php on line 161</p>
<p>I use Apache server &amp; PHP 5. Please help me fix it.</p>
<p>Thanks so much.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-203602", "Bab")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-203682" class="comment ">
								<cite><span class="date">29 July 2009</span><a href="http://hotsiries.com/" rel="external nofollow" class="url">Azwan</a> says:</cite>
				<blockquote>
					<p>Hi,</p>
<p>Thanks for this great article, very useful to me. I will try it and give feedback here.</p>
<p>Thanks again.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-203682", "Azwan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-203711" class="comment ">
								<cite><span class="date">29 July 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi Bab,</p>
<p>On line 161 of broker/sso.php, the response of the server is checked.
 The exception that is thrown on a non-200 status is not really clear 
though.</p>
<p>Please replace the line 161 by:</p>
<pre lang="php">  default:  throw new Exception("SSO failure: The server responded with a $ret status" . (!empty($body) ? ': "' . substr(str_replace("\n", " ", trim(strip_tags($body))), 0, 256) .'".' : '.'));
</pre>
<p>That should give you a clue what’s going wrong.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-203711", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-203782" class="comment ">
								<cite><span class="date">30 July 2009</span>Bab says:</cite>
				<blockquote>
					<p>Thanks Arnold’s</p>
<p>Thanks for your help
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-203782", "Bab")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-203893" class="comment ">
								<cite><span class="date">31 July 2009</span>Rob says:</cite>
				<blockquote>
					<p>Thanks Arnold for such a nice piece of art:D</p>
<p>I’m trying to run it in Windows changing the symlink for a file as 
you said in #17 to Rosa but I don’t know how to get the 
$broker_session_file var.</p>
<p>Thanks in advance</p>
<p>Rob
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-203893", "Rob")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-204344" class="comment ">
								<cite><span class="date">7 August 2009</span>David says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Here’s the error message I get :</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 406 status1: “Not attached”.’ in 
/var/www/SSO/broker/sso.php:162 Stack trace: #0 
/var/www/SSO/broker/index.php(5): SingleSignOn_Broker-&gt;getInfo() #1 
{main} thrown in /var/www/SSO/broker/sso.php on line 162</p>
<p>Can you please help
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-204344", "David")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-204397" class="comment ">
								<cite><span class="date">7 August 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Rob: Sorry for responding so late. The $broker_session_file var 
can be determined from the session id that the broker send. It could be 
something like </p>
<pre lang="php">$broker_session_file = (session_save_path() ? session_save_path() : sys_get_temp_dir()) . '/broker_' . session_id();
</pre>
<p>In that case you should save the client session id (line 132/133) as</p>
<pre lang="php">$broker_session_file = (session_save_path() ? session_save_path() : sys_get_temp_dir()) . '/broker_' . $this-&gt;generateSessionId($_REQUEST['broker'], $_REQUEST['token']);
if (!file_exists($broker_session_file)) file_put_contents('sess_' . session_id(), $link);
</pre>
<p>David: Not attached means that PHP failed to create the symlink in function ‘attach()’ of server/sso.php.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-204397", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-204444" class="comment ">
								<cite><span class="date">8 August 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Windows Vista and Server 2008 appear to have symlink support. In
 PHP 5.3 the symlink() function will work for these operation systems.</p>
<p>If you’re running PHP 5.2 with Vista or Server 2008, try using the following function:</p>
<pre lang="php">define('SYMLINK_FILE', 0);
define('SYMLINK_DIR', 1);
define('SYMLINK_JUNCTION', 2);
function symlink ($target, $link, $flag = SYMLINK_FILE) {
    switch ($flag) {
       case SYMLINK_DIR: $pswitch = '/d'; break;
       case SYMLINK_JUNCTION: $pswitch = '/j'; break;
       case SYMLINK_FILE:
       default: $pswitch = ''; break;
    }
    // Change / to \ because it will break otherwise.
    $target = str_replace('/', '\\', $target);
    $link = str_replace('/', '\\', $link);
    return exec('mklink ' . $pswitch . ' ' . escapeshellarg($link) . ' ' . escapeshellarg($target));
}
</pre>
<div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-204444", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-206705" class="comment ">
								<cite><span class="date">3 September 2009</span><a href="http://www.straylightrun.net/" rel="external nofollow" class="url">gerard</a> says:</cite>
				<blockquote>
					<p>Great blog post. Thanks for the download. I am definitely going to adapt it for our code here.</p>
<p>Haven’t run it myself, but I echo Stefan’s question: in 
server/sso.php, is $_SERVER['REMOTE_ADDR'] the IP address of the client 
or the broker?  Looks to me that it is of the broker, i.e. the IP 
address of the server that makes the curl call.  If so, then it does 
limit cross-server SSO.  My guess is that your demo works because your 
virtual hosts are all on the same box. Am I wrong in this thinking?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-206705", "gerard")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-206931" class="comment ">
								<cite><span class="date">5 September 2009</span><a href="http://blog.owenrudge.net/" rel="external nofollow" class="url">Owen Rudge</a> says:</cite>
				<blockquote>
					<p>I had a play round with this earlier, and found that it gets 
rather messy if IPv6 becomes involved. In my case, I was connecting to 
the broker by IPv4, but the broker and the server had an IPv6 connection
 between them. This caused a fair bit of confusion with matching up IP 
addresses and checksums. After hacking away at it, I found the easiest 
thing to do for now is to force everything to be IPv4 (although, it’d be
 possible to detect whether the client connection is IPv4, and if so, 
set the CURL_IPRESOLVE_V4 flag between the broker and the server; if 
not, use IPv6. Unfortunately, that flag was only introduced in PHP 
5.3.0). I guess the problem isn’t IPv6 per se, it’s just the mixing of 
IPv4 and IPv6. The sooner the whole Internet moves over to IPv6, the 
better. ;)</p>
<p>Anyway, thanks for this code, it has proven useful, and is now 
working quite well. I have taken the code a step further and improved 
the security of logins – specifically, having the username/password 
handled by a form on the server, rather than the broker, therefore 
meaning the broker does not get a hold of the password at all. This form
 is then embedded via an IFRAME into the actual page.</p>
<p>Oh, and while I remember, if anybody wants to access the server via 
SSL, and you’re getting “The server responded with a 0 status”, it may 
be due to an invalid/unauthenticated SSL certificate. If so, add this:</p>
<p>curl_setopt($curl, CURLOPT_SSL_VERIFYPEER, false);</p>
<p>to the serverCmd routine in sso.php.</p>
<p>Additionally, if you are running your lighttpd as the web server for your server, you may get HTTP 417 errors (see <a href="http://redmine.lighttpd.net/issues/1017" rel="nofollow">http://redmine.lighttpd.net/issues/1017</a>). To fix that, place:</p>
<p>curl_setopt($curl, CURLOPT_HTTPHEADER, array(‘Expect:’) );</p>
<p>within the “if (isset($vars))” block in serverCmd.</p>
<p>Those are some of the issues I’ve had, and managed to sort out. Hopefully it will prove useful for people!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-206931", "Owen Rudge")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-206988" class="comment ">
								<cite><span class="date">6 September 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><i><b>Gerard: </b></i>Look at the comment ‘// Broker session’ 
and ‘// User session’. Session id’s of brokers start with ‘SSO-’, 
therefore the code doesn’t get to the point of $_SERVER['REMOTE_ADDR'] 
if a broker connects. First the client connects directly to the server 
and leaves his IP address (in $_SESSION). That IP address is later used 
to validate the session id of the broker, to make sure the client 
talking to the broker is the same that talked to the server.</p>
<p>This solution most definitely works cross server. The ‘Binck’ broker is on another server.</p>
<pre>$ host sso-server.adaniels.nl
sso-server.adaniels.nl has address 82.94.236.135
$ host sso-alex.adaniels.nl
sso-alex.adaniels.nl has address 82.94.236.135
$ host sso-binck.jasny.net
sso-binck.jasny.net has address 82.94.182.130
</pre>
<p><i><b>Owen Rudge: </b></i>Thanks for your input Owen. Those are some 
great comments about issues that might occur. I’m sure that will help a 
lot of people.</p>
<p>Since I work at a company that make AJAX apps, using an iframe won’t 
work for us. It really boils down to if both applications have the same 
owner and if the developer of the broker app can be trusted. If not, 
than you indeed don’t want to pass the password to the broken.</p>
<p>Perhaps you want to share your code on your blog (I’ll add a link). I’m sure people will be interested.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-206988", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-208582" class="comment ">
								<cite><span class="date">7 October 2009</span>test says:</cite>
				<blockquote>
					<p>if (!file_exists($link)) $attached = symlink($targetDir, $file);, its nor working in my server. its always return null.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-208582", "test")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-208623" class="comment ">
								<cite><span class="date">8 October 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><i>test:</i></b> Your code looks flawed. Shouldn’t it be<br>
if (!file_exists($link)) $attached = symlink($targetDir, <b>$link</b>);</p>
<p>Make sure you see E_NOTICE and E_WARNING errors, so you can see why the link is not created.<br>
<i>Ps. This is not a help forum. So plz don’t ask non- and semi-related questions on this blog. Go to <a href="http://forums.devnetwork.net/" rel="nofollow">http://forums.devnetwork.net</a> instead.</i>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-208623", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-208893" class="comment ">
								<cite><span class="date">13 October 2009</span><a href="http://web/" rel="external nofollow" class="url">Garry</a> says:</cite>
				<blockquote>
					<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 0 status.’ in C:\Program 
Files\Apache Software Foundation\Apache2.2\htdocs\broker\sso.php:161 
Stack trace: #0 C:\Program Files\Apache Software 
Foundation\Apache2.2\htdocs\broker\index.php(5): 
SingleSignOn_Broker-&gt;getInfo() #1 {main} thrown in C:\Program 
Files\Apache Software Foundation\Apache2.2\htdocs\broker\sso.php on line
 161</p>
<p>Your advice 23 does not help [in fact this you publish exactly same line you want us to replace].<br>
What do you mean in post 27, you want to place this code inside function ‘logout’? I do not think so…</p>
<p>And same about 28 – WHERE you want to place this function?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-208893", "Garry")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-208894" class="comment ">
								<cite><span class="date">13 October 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><i>Garry:</i></b> I already changed the line of [23] in the source.<br>
Probably the server didn’t really return a 0, but the curl call fails. </p>
<p>Add the following on line 216:</p>
<pre lang="php">if (curl_errno($curl) != 0) throw new Exception("SSO failure: HTTP request to server failed. " . curl_error($curl));
</pre>
<p>Function ‘symlink’ [28], is used on the SSO server. You don’t need [27] if you use [28].</p>
<div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-208894", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-209956" class="comment ">
								<cite><span class="date">5 November 2009</span>yunuz says:</cite>
				<blockquote>
					<p>Parse error: syntax error, unexpected T_NEW in /usr/local/apache2/htdocs/nswapps/login/sso/broker/sso.php on line 120</p>
<p>I use Apache server &amp; PHP 4. Please help me fix it.<br>
urgent needed..
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-209956", "yunuz")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-209966" class="comment ">
								<cite><span class="date">5 November 2009</span><a href="http://www.hyperinterworks.com/" rel="external nofollow" class="url">Chris</a> says:</cite>
				<blockquote>
					<p>I like the SSO server, really interested in using it but the way
 it works is the slightest bit beyond me, I would like to make a minor 
change to it where the brokers and the users are all stored in two 
separate mysql tables. Does anyone know how I would do this or has 
someone already achieved this and is willing to send me a copy. Thanks.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-209966", "Chris")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-209970" class="comment ">
								<cite><span class="date">5 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Yunuz:</em></strong> This code (or any other code 
I’ve ever posted or will post) won’t work with PHP 4. Upgrade to PHP 5, 
PHP 4 has been dead for over a year.</p>
<p><strong><em>Chris:</em></strong> Look at function generateSessionId()
 and generateAttachChecksum(). The secret phrase is fetch using 
self::$brokers[$broker]['secret']. You can replace that by a query like 
“SELECT secret FROM broker WHERE name=’$broker’”.<br>
Further you should replace function login() with something more 
sophisticated. You can probably replace this with your existing auth 
login method. Also replace the info() method.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-209970", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210078" class="comment ">
								<cite><span class="date">8 November 2009</span>ubuntu9 says:</cite>
				<blockquote>
					<p>Hi,<br>
I just downloade the file sso.zip and unzip it to my ubuntu server root (ver 9.10). Change the sso server link like this:</p>
<p>public $url = “http://localhost/server/sso.php”;</p>
<p>Run the first time, it said curl_init is undefined, so i update php5-curl using this:</p>
<p>apt-get install php5-curl</p>
<p>The update is successful and then i restart apache2 server.</p>
<p>The next try, i got this error:</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 406 status: “Not attached”.’ in 
/var/www/broker/sso.php:162 Stack trace: #0 
/var/www/broker/index.php(5): SingleSignOn_Broker-&gt;getInfo() #1 
{main} thrown in /var/www/broker/sso.php on line 162</p>
<p>Can anyone help me out? any other settings i need to make?</p>
<p>I guess the sso server and the broker on the same machine doesn’t matter, right?</p>
<p>Thank you
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210078", "ubuntu9")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210103" class="comment ">
								<cite><span class="date">9 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>ubuntu9: </em></strong>Not attached means that the session id used by the broker is not linked to the session of the client.</p>
<p>Enable error logging (<a href="http://nl3.php.net/manual/en/errorfunc.configuration.php" rel="nofollow">http://nl3.php.net/manual/en/errorfunc.configuration.php</a>)
 and look at the error_log. You’ll probably see ‘Failed to attach; 
Symlink wasn’t created’, with one or more warning above it, telling you 
why the symlink wasn’t created.</p>
<p>—<br>
Also I want to point out that using localhost or a LAN might cause 
issues. If the broker is on the LAN but the SSO server isn’t, the 
$_SESSION['client_addr'] is different. The server will respond with 
‘Invalid session id’. Since you’re getting a ‘Not attached’ message, 
this is not the issue in your situation.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210103", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210123" class="comment ">
								<cite><span class="date">10 November 2009</span>ubuntu9 says:</cite>
				<blockquote>
					<p>Thanks, Arnold for your explanation.</p>
<p>Yes, you are quite correct, localhost should not be used in any case.
 The actual server name or IP address should be used instead. Deploy 
both broker and sso server on the same box may cause issue too.</p>
<p>In my case, now i’m using two LAN machines:<br>
1. server1: windows 2003 with curl loaded, used as broker server<br>
2. server2: ubuntu 9.10, used as sso server</p>
<p>in sso.php of the broker, i change sso url like this:<br>
public $url = “http://server2/server/sso.php”</p>
<p>Using firefox 3.5.5, the first try to: <a href="http://server1/broker/index.php" rel="nofollow">http://server1/broker/index.php</a> always result in indefinite redirect. The browsers display something like this:</p>
<p>In the address bar: <a href="http://server1///////////broker/index.php" rel="nofollow">http://server1///////////broker/index.php</a></p>
<p>Details of the error:</p>
<p>————————————————————<br>
The page isn’t redirecting properly</p>
<p>Firefox has detected that the server is redirecting the request for this address in a way that will never complete.</p>
<p>    *   This problem can sometimes be caused by disabling or refusing to accept<br>
          cookies.<br>
————————————————————</p>
<p>Look at the apache log file i see:<br>
————————————————————<br>
192.168.84.246 – - [10/Nov/2009:13:10:09 +0700] “GET /broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:09 +0700] “GET //broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:09 +0700] “GET ///broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:09 +0700] “GET ////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET /////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET //////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET ///////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET ////////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET /////////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET //////////broker/index.php HTTP/1.1″ 307 -<br>
192.168.84.246 – - [10/Nov/2009:13:10:10 +0700] “GET ///////////broker/index.php HTTP/1.1″ 307 -</p>
<p>————————————————————</p>
<p>I manually re-enter the URL like this <a href="http://server1/broker/index.php" rel="nofollow">http://server1/broker/index.php</a></p>
<p>Now the login page showned up.</p>
<p>I have no idea why there are so many redirects here? What can be the reason of this? I appreciate your help
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210123", "ubuntu9")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210125" class="comment ">
								<cite><span class="date">10 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>ubuntu9: </em></strong>Try to see what is happening 
with the Tamper Data or Live HTTP headers plugin. You’re probably being 
redirected back-and-forth from broker to server. The most obvious reason
 for this is (as Firefox already suggested), an issue with the 
session_token cookie.</p>
<p>The additional slash might be because $_SERVER["REQUEST_URI"] starts 
with a slash, adding the slash in the redirect url. This shouldn’t be a 
big issue, though see if it helps when you replace line 57 of 
broker/sso.php with</p>
<pre lang="PHP">header("Location: " . $this-&gt;getAttachUrl() . "&amp;redirect=". urlencode("http://{$_SERVER["SERVER_NAME"]}{$_SERVER["REQUEST_URI"]}"), true, 307);
</pre>
<div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210125", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210179" class="comment ">
								<cite><span class="date">12 November 2009</span>ubuntu9 says:</cite>
				<blockquote>
					<p>Thanks Arnold. Your solution worked. $_SERVER["REQUEST_URI"] 
starts with a slash so there is no need for another slash in header 
function. Now everything works for me.</p>
<p>To help other developers make this SSO solution work for them, i would like to summarize my experience here:</p>
<p>1. The SSO server must be a unix/linux server. As Arnold said, windows 2008 and vista may work, but i’m not sure.<br>
2. LOCALHOST cannot be used in any case, must be server name or ip address.<br>
3. Change line 57 in broker/sso.php as below (remove the slash before $_SERVER["REQUEST_URI"])</p>
<p>header(“Location: ” . $this-&gt;getAttachUrl() . “&amp;redirect=”. 
urlencode(“http://{$_SERVER["SERVER_NAME"]}{$_SERVER["REQUEST_URI"]}”), 
true, 307);</p>
<p>Looking at the server/sso.php, i guess this solution will not work if
 there are many visitors behind a proxy server. Because their IP address
 will be the same for all (to the outside world). This make the SSO 
server to treat them as the same client.</p>
<p>Can anyone confirm this? Thanks.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210179", "ubuntu9")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210318" class="comment ">
								<cite><span class="date">15 November 2009</span>jirin says:</cite>
				<blockquote>
					<p>Thank you for your article. Could you write solution for working
 without symlink()? I tried solution you write in article, but it is not
 working. I try to do it for 3hours but no success. I have probably 
permited symlink() on hosting, I tried it on 2 different hosting
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210318", "jirin")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210418" class="comment ">
								<cite><span class="date">16 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>jirin: </em></strong>The code is just mend to be an 
example, not an open source project. However, since there have be so 
many requests to make this work without symlinks. I’ve modified the code
 so it can do so. Simply set the links_path property to something like 
‘/tmp’ and the SSO server will use files containing the session id, 
instead of symlinks.</p>
<p>PS. Don’t forget to delete all cookies (broker and server) after changing links_path.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210418", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210433" class="comment ">
								<cite><span class="date">16 November 2009</span>jirin says:</cite>
				<blockquote>
					<p>Thank you very much Arnold, it looks working! Once more thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210433", "jirin")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210513" class="comment ">
								<cite><span class="date">18 November 2009</span>Kevin says:</cite>
				<blockquote>
					<p>Thanks Arnold, I almost have this fully working.  However, when a
 users IP changes, eg. from LAN to Wireless, I get the 406 – Invalid 
Session Id error.  I know this is because the $_SESSION['client_addr'] 
!= the $SERVER['REMOTE_ADDR'] originally stored in the session.  What is
 the best way to reset the client state?  I don’t want to have them 
clear cookies each time this happens.  I’m having trouble figuring out 
where to put the logic as well.  Thank you.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210513", "Kevin")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210516" class="comment ">
								<cite><span class="date">18 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Kevin: </em></strong>The IP check is there against 
session hijacking. You could disable that by simply removing all 
$_SERVER['REMOTE_ADDR'] entries. They’re not essential for making this 
SSO method work, but only increase security.</p>
<p>Also, instead of using $_SESSION['client_addr'] to check if a session
 is initialised (line 86), use $_SESSION['init'] and set that to true 
(line 103).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210516", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210643" class="comment ">
								<cite><span class="date">20 November 2009</span>Kevin says:</cite>
				<blockquote>
					<p>Hi Arnold,<br>
Thank you for the help on the REMOTE_ADDR.  I am having a separate issue
 regarding infinite redirects.  I find this happens when the client 
somehow holds a ‘session_token’ linked to session ‘a’ using broker ‘x’, 
and a ‘session token’ linked to session ‘b’ using broker ‘y’.  How can I
 protect against this case?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210643", "Kevin")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210688" class="comment ">
								<cite><span class="date">21 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Kevin: </em></strong>Hmm, that’s a bit of an edge-case. I must admit that I didn’t think about that occurring. </p>
<p>I tried to reproduce this, by deleting only the session of the 
sso-server. In that case the 2 brokers are using different server 
sessions. However, I’m not able to reproduce the infinite redirecting. 
Please post how this redirection goes by using something like fiddler or
 tamper data.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210688", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210971" class="comment ">
								<cite><span class="date">27 November 2009</span>Amit says:</cite>
				<blockquote>
					<p>Hi,<br>
I am looking forward to use it. Since it is not not using symlinks so I 
can easily use this on windows server as well. Very basic question: Do I
 need seperate server for broker?</p>
<p>Thanks,<br>
Amit
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-1/#comment-210971", "Amit")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-210992" class="comment ">
								<cite><span class="date">27 November 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Amit:</em></strong> The server needs to be on a 
different domain than the brokers. Using a different subdomain like 
‘auth.example.com’ for the server and ‘www.example.com’ for the broker, 
will work as well. The server/brokers can be on a different fiscal 
server, but don’t need to be.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-210992", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211281" class="comment ">
								<cite><span class="date">4 December 2009</span>Mathias says:</cite>
				<blockquote>
					<p>Arnold,</p>
<p>I see where it checks for $_SESSION['client_addr'] and destroys the 
session if it’s not set. But I don’t see where this is actually set.<br>
My implementation hits this session_destroy() everytime. Where in the 
class were you intending to define the ‘client_addr’ session var? </p>
<p>Thanks.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211281", "Mathias")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211307" class="comment ">
								<cite><span class="date">4 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>$_SESSION['client_addr'] is set by the client as it creates the session on <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L103" target="_blank" rel="nofollow">line 103</a>.</p>
<p>If you are getting ‘Not attached’ each time, the client is either not
 connecting to the server or the symlink (or link file) isn’t created 
correctly. Have a look at the previous comments.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211307", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211354" class="comment ">
								<cite><span class="date">5 December 2009</span>Mathias says:</cite>
				<blockquote>
					<p>I have the client attaching correctly and the symlink is 
working. The problems seems to be that there is a sessionStart() at the 
beginning of the attach(). Here within the sessionStart() it never gets 
to the bottom where it sets the client_addr. It always matches on the 
session_name() and then fails on the client_addr.<br>
If I just comment this session_destroy() segment out – I’m able to attach just fine.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211354", "Mathias")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211360" class="comment ">
								<cite><span class="date">5 December 2009</span><a href="http://mio.vn/" rel="external nofollow" class="url">Thiet Doan</a> says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Firstly, I want to thank you about your SSO implementation.<br>
When I deployed your source code in my local computer, it worked very well.<br>
But It always gets 403 for bidden error when I deploy it to my hosting.<br>
- SSO server: <a href="http://service.mio.vn/server/index" rel="nofollow">http://service.mio.vn/server/index</a>.<br>
- SSO client: <a href="http://mio.vn/customer/login" rel="nofollow">http://mio.vn/customer/login</a></p>
<p>Any ideas?</p>
<p>Thank you,
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211360", "Thiet Doan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211363" class="comment ">
								<cite><span class="date">5 December 2009</span><a href="http://mio.vn/" rel="external nofollow" class="url">Thiet Doan</a> says:</cite>
				<blockquote>
					<p>I have just modified SSO implementation to make it do not use symlink function by saving data to a table in database.</p>
<p>Firstly, you can create a table named “links”:</p>
<pre lang="SQL">CREATE TABLE IF NOT EXISTS `links` (
  `id` int(11) unsigned NOT NULL auto_increment,
  `code` varchar(128) NOT NULL,
  `link` varchar(64) default NULL,
  PRIMARY KEY  (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 ;
</pre>
<p>Then, you should modify the server class (SingleSignOn_Server) to save data to database instead of saving it to a file.</p>
<p>Just modify 2 functions sessionStart and attach as follow:</p>
<pre lang="php">protected function sessionStart()
{
    if ($this-&gt;started) return;
    $this-&gt;started = true;
    
    // Broker session
    $matches = null;
    if (isset($_REQUEST[session_name()]) &amp;&amp; preg_match('/^SSO-(\w*+)-(\w*+)-([a-z0-9]*+)$/', $_REQUEST[session_name()], $matches)) {
        $sid = $_REQUEST[session_name()];
        
        // check the ID existed or not
        $result = $database-&gt;query("SELECT `* FROM `links` WHERE `code` = '" . $sid . "'")
        if (isset($result['link'])) {
            session_id($result['link']);
            session_start();
            setcookie(session_name(), "", 1);
        } else {
            session_start();
        }

        if (!isset($_SESSION['client_addr'])) {
            session_destroy();
            $this-&gt;fail("Not attached");
        }
        
        if ($this-&gt;generateSessionId($matches[1], $matches[2], $_SESSION['client_addr']) != $sid) {
            session_destroy();
            $this-&gt;fail("Invalid session id");
        }

        $this-&gt;broker = $matches[1];
        return;
    }

    // User session
    session_start();
    if (isset($_SESSION['client_addr']) &amp;&amp; $_SESSION['client_addr'] != $_SERVER['REMOTE_ADDR']) session_regenerate_id(true);
    if (!isset($_SESSION['client_addr'])) $_SESSION['client_addr'] = $_SERVER['REMOTE_ADDR'];
}

public function attach()
{
    $this-&gt;sessionStart();
    
    if (empty($_REQUEST['broker'])) $this-&gt;fail("No broker specified");
    if (empty($_REQUEST['token'])) $this-&gt;fail("No token specified");
    if (empty($_REQUEST['checksum']) || $this-&gt;generateAttachChecksum($_REQUEST['broker'], $_REQUEST['token']) != $_REQUEST['checksum']) $this-&gt;fail("Invalid checksum");

    $sid = $this-&gt;generateSessionId($_REQUEST['broker'], $_REQUEST['token']);
    $result = $database-&gt;query("SELECT `* FROM `links` WHERE `code` = '" . $sid . "'")
    if (!isset($result['link'])) {
        $attached = $database-&gt;query("INSERT INTO `links`(`code`, `link`) VALUES('" . $sid . "', '" . session_id() . "')");
        if (!$attached) trigger_error("Failed to attach; Symlink wasn't created.", E_USER_ERROR);
    } else {
        $attached = $database-&gt;query("UPDATE `links` SET `link` = '" . session_id() . "' WHERE `code` = '" . $sid . "'");
        if (!$attached) trigger_error("Failed to attach; Link file wasn't created.", E_USER_ERROR);
    }

    if (isset($_REQUEST['redirect'])) {
        header("Location: " . $_REQUEST['redirect'], true, 307);
        exit;        
    }
    
    // Output an image specially for AJAX apps
    header("Content-Type: image/png");
    readfile("empty.png");
}
</pre>
<p>After that, you can completely remove links_path property and its initializing in __construct funnction.</p>
<p>Hope it helps
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211363", "Thiet Doan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211472" class="comment ">
								<cite><span class="date">7 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><i><b>Thiet Doan: </b></i>The script doesn’t return a 403 http response, so check the URLs and otherwise look at the apache error log.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211472", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211497" class="comment ">
								<cite><span class="date">8 December 2009</span>Mathias says:</cite>
				<blockquote>
					<p>I guess I don’t see how line 75(server) evaluates false when it 
is being set every time in the cookie by the broker on line 205(broker).
 If this evals true everytime (mine does) it will never get to line 103 
where the client_addr is set. What am I doing wrong? Should this be 
evaluating false the first time around?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211497", "Mathias")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211498" class="comment ">
								<cite><span class="date">8 December 2009</span>Mathias says:</cite>
				<blockquote>
					<p>Ok, I see how it’s supposed to work. It does indeed evaluate 
false the first time through on the attach. The session appears to be 
set (the first time through). But the second time the sessionStart() is 
fired, the $_SESSION[client_addr] is no longer set. Do you know what may
 cause that?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211498", "Mathias")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211510" class="comment ">
								<cite><span class="date">8 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Mathias:</em></strong> If no session variables are 
set, the broker probably isn’t using the session file that was created 
by the client when connecting to server.</p>
<p>On <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L85" rel="nofollow">line 85</a> AND <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L103" rel="nofollow">line 103</a>, insert</p>
<pre lang="php">header('X-SessionId: ' . session_id());
</pre>
<p>Use something like tamper data (firefox) or fiddler (windows) to 
check the HTTP headers. Check the session dir and see if the session 
file of the broker is a symlink to the session file of client.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211510", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211812" class="comment ">
								<cite><span class="date">15 December 2009</span>Alex says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>First I would like to thank you for your nice work! It’s so great to find this kind of help.</p>
<p>I have a particular question about your single sign on. I would like 
to implement it on my website to allow my partners to use my API.</p>
<p>At the present time, my partners insert my API on their own website 
for their own users. But these users have to register and then login 
when they come to the API pages.</p>
<p>My question is, can I use your single sign on script to allow to my user’s partner to log on once only?</p>
<p>And my second question is, if my partners have their own users 
registered in their DB, will I have to registered their users first on 
my own DB before? Or will I have to create accounts on the fly?</p>
<p>I don’t know if I’m clear enough so please let me know,</p>
<p>Thanks again,</p>
<p>Alexandre
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211812", "Alex")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211815" class="comment ">
								<cite><span class="date">15 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Alex: </em></strong> In this example, the SSO-server
 does all the authentication, though the brokers collect the username 
and password. That means that a.) the brokers need to be completely 
trusted (aka your sites). This is probably not the case for partners. 
And b.) it assumes that the SSO-server holds all user information and 
the brokers hold none.</p>
<p>If the SSO-brokers hold their own user information, the role of the 
SSO-server changes. He no longer has to do authentication, the broker 
can simply tell the server that that user is logged in. The server can 
tell the next broker, that this user is logged in. For this the 
SSO-servers needs to know which user of broker A is which user on Broker
 B.</p>
<p>Example; I’m known as ‘arnolddaniels’ on LinkedIn, but as 
‘adaniels_nl’ on Twitter. LinkedIn would tell the SSO-server that 
‘arnolddaniels’ has logged in. If I would visit Twitter next, Twitter 
would as which user is logged in. If the server would reply 
‘arnolddaniels’, this would not work.</p>
<p>That whole issue can be overcome by not having the brokers pass a 
username, but pass an e-mail adress instead. In that case, the server 
does not have to create any accounts (not at forehand and not on the 
fly).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211815", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211821" class="comment ">
								<cite><span class="date">15 December 2009</span>Alex says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Thanks for your answer.</p>
<p>I think I got it. So in my case, if I want to allow my Partners to 
use the single sign on for their own users, I will need to ask them to 
import first their users into my own DB (through a CSV file and a simple
 form in my front site for e.g).</p>
<p>Then, once their users have been added to our DB, I could match them thanks to their email as the ID as per your suggestion.</p>
<p>So finally, User A) will go to Partner site and connect to their own 
DB during the authentifaction, then once he will come to our API 
included inside the Partner site, he will be automatically recognized 
and logged in (so we could save information related to this particular 
user in our own DB when he will use our API).</p>
<p>This sounds good, but I have another question: How can I have the Partner’s users list always up to date?<br>
I mean, I can’t ask to my Partners to update their user’s list everyday 
through my website thanks to a .CSV file for e.g… it’s too constraining…
 Do you have any idea for this?</p>
<p>Alex.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211821", "Alex")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211825" class="comment ">
								<cite><span class="date">15 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Alex:</em></strong> ehh <b>no</b>… The server doesn’t need to have any account information of the users.</p>
<p>User A will go to Partner X site. He will be redirected to the 
SSO-server, where a new session is created and attached. Partner X asks 
if the user is already logged in and the SSO-servers replies ‘no’. User A
 logs in at Partner X. Partner X sends the e-mail address to the 
SSO-server. The SSO-server will save this e-mail in the attached 
session.</p>
<p>Now user A visits Parner Y site. He will be redirected to the 
SSO-server, where his existing session is attached. Parner Y asks if the
 user is logged in and the servers replies with the e-mail adress. 
Parner Y looks up the user in his own DB based on the e-mail adress and 
logs in the user without asking for a password.</p>
<p>Do know that you need to completely trust all partners. An 
administrator of any partner can get into any account of any other 
partner, without having to specify a password. This is due to the fact 
that logging in to any of the partner sites means you’re logged in to 
all of the partner sites.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211825", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211835" class="comment ">
								<cite><span class="date">15 December 2009</span>Alex says:</cite>
				<blockquote>
					<p>Sorry but I have some difficulties to understand properly the whole process.</p>
<p>When you said:<br>
“Now user A visits Parner Y site. He will be redirected to the 
SSO-server, where his existing session is attached. Parner Y asks if the
 user is logged in and the servers replies with the e-mail adress. 
Parner Y looks up the user in his own DB based on the e-mail adress and 
logs in the user without asking for a password.”</p>
<p>=&gt; What happens if User A is not in Partner Y DB?<br>
The thing is, all my partners will have different DB (obviously) with 
different users so how User A could connect to Partner Y site although 
User A is a user of Partner X?</p>
<p>Also my main goal is to allow the registered users of each of my 
partners to connect to my own DB / users system when they will use my 
API without having to sign in again (twice: first on the partner home 
page, and then when they come to our API included in Partner’s website 
pages).</p>
<p>But my partners won’t accept to share their users credentials with the others partners…</p>
<p>Actually, I though I could use your Single sign on like the following procedure:<br>
- <a href="http://getsatisfaction.com/developers/fastpass" rel="nofollow">http://getsatisfaction.com/developers/fastpass</a><br>
- <a href="http://getsatisfaction.com/developers/fastpass_technical" rel="nofollow">http://getsatisfaction.com/developers/fastpass_technical</a></p>
<p>Is it possible?</p>
<p>Thanks again, and sorry for my misunderstanding,</p>
<p>Alexandre
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211835", "Alex")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-211840" class="comment ">
								<cite><span class="date">15 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Alex: </em></strong> Remember, the trick of this 
whole method is shared sessions. The broker (the server of your partner 
site) can use the same session as the client, therefore the broker can 
do anything the client (user) would normally do. This can be logging in,
 but also registering, adding a product in a shopping cart, enabling a 
service, etc.</p>
<p>After logging in on the partner site, the broker might tell the 
server that user ‘somebody@example.com’ has logged in. The server should
 return whether or not the user exists (as HTTP response). If the user 
does not exist, the broker can send the user information to the server, 
which can create a user OR the broker can simply redirect the client to 
register himself. If the sign-on is only 1-way, simply leave out the 
part where the broker requests the e-mail address of the logged in user.</p>
<p>Also, if I understand correctly, sessions shouldn’t be shared between
 brokers. The best way to solve that is to make 1 subdomain per broker, 
eg:<br>
  <a href="http://partner-x.example.com/" rel="nofollow">http://partner-x.example.com</a><br>
  <a href="http://partner-y.example.com/" rel="nofollow">http://partner-y.example.com</a><br>
This can be done by a virtual host with ‘ServerAlias *.example.com’. 
Than get the broker name from $_SERVER['HTTP_HOST'] instead of from 
$_REQUEST['broker'].
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-211840", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212234" class="comment ">
								<cite><span class="date">23 December 2009</span>sriman says:</cite>
				<blockquote>
					<p>Hi Arnold,<br>
  First I would like to thank you for your great work.<br>
   I have two domain name like <a href="http://testsso.com/test/" rel="nofollow">http://testsso.com/test/</a> and <a href="http://session.com/session/" rel="nofollow">http://session.com/session/</a>  how i will configure?.I am new to this concept can you please explain.I got the error.i am using php 5.2.3 version and apache</p>
<p>Uncaught exception ‘Exception’ with message ‘SSO failure: The server 
responded with a 404 status: “Object not found! Object not found! The 
requested URL was not found on this server. If you entered the URL 
manually please check your spelling and try again. If you think this is a
 server error,</p>
<p>Thanks<br>
Sriman
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212234", "sriman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212237" class="comment ">
								<cite><span class="date">23 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Sriman: </em></strong>The url to the SSO server (in <a href="http://github.com/adaniels-nl/SSO/blob/master/broker/sso.php#L16" target="_blank" rel="nofollow">broker/sso.php on line 16</a>) is not configured correctly.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212237", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212238" class="comment ">
								<cite><span class="date">23 December 2009</span>sriman says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>      Thanks for your help,After i give proper url i got the<br>
        Uncaught exception ‘Exception’ with message ‘SSO failure: The 
server responded with a 406 status: “Not attached”.’ in 
C:\xampp\htdocs\phpsvn\test\sso.php:161 Stack trace: #0 
C:\xampp\htdocs\phpsvn\test\login.php(8): 
SingleSignOn_Broker-&gt;getInfo() #1 {main} thrown in 
C:\xampp\htdocs\phpsvn\test\sso.php on line 161.why its coming 
error.whats the problem?can you help me.</p>
<p>Thanks<br>
Sriman
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212238", "sriman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212244" class="comment ">
								<cite><span class="date">23 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Sriman: </em></strong>Please read the comments of 
the properties of the class SingleSignOn_Broker and class 
SingleSignOn_Server. Most of them are settings. You should configuring 
them. Also read the comments below the article. In there this question 
is already answered.</p>
<p>In this case, since you are using Windows, you can’t use symlinks. 
Instead use normal files for attaching by setting $links_path (<a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L15" target="_blank" rel="nofollow"> server/sso.php line 15</a>) to some kind of tempdir.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212244", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212269" class="comment ">
								<cite><span class="date">24 December 2009</span>sriman says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>      First of all Wishing you  a Merry Christmas…..<br>
      still i have big doubt that is i login to gmail account… now go to
 my localhost give that gmail url as public url in broker sso.php and 
url not specify the any php file just url of gmail.i configure the ur 
code in my localhost.is it possible to autologin in my site when i login
 gmail……kindly give some clarification of example….please.</p>
<p>Thanks<br>
Sriman
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212269", "sriman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212275" class="comment ">
								<cite><span class="date">24 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>sriman: </em></strong>This is an example of how to 
set up your own Single Sign-On system, with your own user data. It has 
absolutely nothing to do with Google accounts / GMail or those kind of 
things.</p>
<p>To validate google users, you need to use OpenID. See <a href="http://code.google.com/intl/nl/apis/accounts/docs/OpenID.html" rel="nofollow">http://code.google.com/intl/nl/apis/accounts/docs/OpenID.html</a>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212275", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-212280" class="comment ">
								<cite><span class="date">24 December 2009</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>sriman: </em></strong>The download is not a install 
and configure application. This is an example showing how to implement 
SSO in your own application. Installing this software on your server 
should give you the exact same functionality as the demos. You can log 
in with the users, set on <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L43" target="_blank" rel="nofollow">server/sso.php line 43</a>.</p>
<p>You need write your own authentication implementation, replacing <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L133" target="_blank" rel="nofollow">login()</a> and <a href="http://github.com/adaniels-nl/SSO/blob/master/server/sso.php#L192" target="_blank" rel="nofollow">info()</a>.</p>
<p>Again, this is just an example, not a full fledged SSO solution. If you need that, look at <a href="http://rnd.feide.no/simplesamlphp" rel="nofollow">simpleSAMLphp</a>.</p>
<p><i>This is all I can say about this. Just read the article and 
comments carefully. You’ve asked nothing that is not explained in there.</i>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-212280", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213002" class="comment ">
								<cite><span class="date">7 January 2010</span><a href="http://www.priyaranjan.net/" rel="external nofollow" class="url">Crash</a> says:</cite>
				<blockquote>
					<p>Very informative article. This just made things quite clear. 
Specially i like the part when images have been explained using http 
response codes.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213002", "Crash")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213056" class="comment ">
								<cite><span class="date">8 January 2010</span>Paul Harman says:</cite>
				<blockquote>
					<p>Hi,</p>
<p>Interesting article. One point I don’t quite understand is what 
information a second broker is passing to the SSO server which allows it
 to be linked to the session of the first broker. Am I correct in 
thinking that the client IP address is used to identify the client on 
multiple domains? Thus if the IP address of a logged in client is known 
then security is compromised?</p>
<p>Thanks,<br>
Paul
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213056", "Paul Harman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213146" class="comment ">
								<cite><span class="date">10 January 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><strong><em>Paul: </em></strong>No, the IP is purely against session hijacking and can be left out.</p>
<p>Read the article again and look at the images more closely. Don’t try
 to deduce the working by looking at the code. The trick lies in the 
broker token that is issued by the broker, than passed to the client, 
which passed it to the server. The server knows who the client is by the
 session cookie.</p>
<blockquote><p>The server will generate a session key based on the 
broker identity, the secret word of the broker and the token and link 
this to the session of the client.</p></blockquote>
<div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213146", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213404" class="comment ">
								<cite><span class="date">17 January 2010</span><a href="http://www.hyperinterworks.com/" rel="external nofollow" class="url">Chris</a> says:</cite>
				<blockquote>
					<p>Does anyone have any idea of how to customize this so that it 
uses a database to store brokers, users, and sessions. Need it to be 
able to easily scale to support anything from 3 sites to 50 sites and an
 unlimited number of users.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213404", "Chris")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213426" class="comment ">
								<cite><span class="date">18 January 2010</span>Nizar says:</cite>
				<blockquote>
					<p>Thank you, it really works,  We’ve implemented your code on 
program using CI framework. Still wondering if it can be used with 
Moodle.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213426", "Nizar")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-213782" class="comment ">
								<cite><span class="date">27 January 2010</span><a href="http://-/" rel="external nofollow" class="url">Deni</a> says:</cite>
				<blockquote>
					<p>Hi Arnorld,<br>
it works fine on my localhost, nice share..<br>
@nizar : it would be nice if you could share your implementation on CI application…
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-213782", "Deni")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214280" class="comment ">
								<cite><span class="date">7 February 2010</span><a href="http://www.konnectp.com/" rel="external nofollow" class="url">sarada</a> says:</cite>
				<blockquote>
					<p>Hi Arnold,<br>
I copied ur server/sso.php to sso.sahooshare.com and broker directory contents to <a href="http://www.konnectp.com/" rel="nofollow">http://www.konnectp.com</a>, but still it won’t work.</p>
<p>It displays the below error when i try to access <a href="http://www.konnectp.com/" rel="nofollow">http://www.konnectp.com</a>.</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: HTTP request to server failed. couldn’t connect to host’ in 
/hsphere/local/home/sarada/konnectp.com/sso.php:216 Stack trace: #0 
/hsphere/local/home/sarada/konnectp.com/sso.php(155): 
SingleSignOn_Broker-&gt;serverCmd(‘info’) #1 
/hsphere/local/home/sarada/konnectp.com/index.php(7): 
SingleSignOn_Broker-&gt;getInfo() #2 {main} thrown in 
/hsphere/local/home/sarada/konnectp.com/sso.php on line 216 </p>
<p>broker= <a href="http://www.konnectp.com/index.php" rel="nofollow">http://www.konnectp.com/index.php</a><br>
sso server= <a href="http://sso.sahooshare.com/sso.php" rel="nofollow">http://sso.sahooshare.com/sso.php</a></p>
<p>but still it shows the above error.<br>
Please help me.</p>
<p>Thanks in advance.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214280", "sarada")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214320" class="comment ">
								<cite><span class="date">8 February 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><i>Sarada</i></b> The broker is unable to connect to the server. Make sure you have the right URL in <a href="http://github.com/jasny/SSO/blob/master/broker/sso.php#L16" rel="nofollow">broker/sso.php on line 16</a>. Check if there is a firewall in place blocking outbound traffic on port 80.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214320", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214325" class="comment ">
								<cite><span class="date">8 February 2010</span><a href="http://www.konnectp.com/" rel="external nofollow" class="url">sarada</a> says:</cite>
				<blockquote>
					<p>Hello Arnold,</p>
<p>I have given correct url in my broker. U can see as below.</p>
<p>public $pass401=false;</p>
<p>public $url= “http://sso.sahooshare.com/sso.php”;</p>
<p>public $broker = “LYNX”;<br>
public $secret = “klm345″;</p>
<p>I can able to access the above server url, its working.</p>
<p>But as you said how can i know whther there is a firewall which blocks port 80 or not .<br>
Could you please help me.<br>
Thanks in advance.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214325", "sarada")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214326" class="comment ">
								<cite><span class="date">8 February 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><i>Sarada</i></b> This is a system administration problem, 
not a software issue. If you’re not the sysadmin, please consult your 
sysadmin. If you are the sysadmin, you should know how to solve this.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214326", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214366" class="comment ">
								<cite><span class="date">9 February 2010</span><a href="http://www.konnectp.com/" rel="external nofollow" class="url">sarada</a> says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>It was some system issue. I consult the System admin and it got fixed. Now it is working.</p>
<p>You can see the demo at @ <a href="http://www.konnectp.com/" rel="nofollow">http://www.konnectp.com</a></p>
<p>Thanks.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214366", "sarada")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214812" class="comment ">
								<cite><span class="date">21 February 2010</span>Jack says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>   How to implement the single sign in my site.<br>
   give me proper explanation in step by step. i am new to this concept .<br>
  Give proper response is appreciated.</p>
<p>Thank<br>
Jack
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214812", "Jack")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214847" class="comment ">
								<cite><span class="date">22 February 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi <b><em>Jack </em></b>,</p>
<p>This is about as step-by-step as it’s going to get here. Make sure 
you read the article carfully, so you understand the concept behind the 
code.</p>
<p>You might want to take 3 steps for implementing the SSO solution in your own site:<br>
 1.) Download the code from GitHub and get it working, as is, on your server.<br>
 2.) Replace <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L140" rel="nofollow">line 140 of server/sso.php</a> with a method that check the referentials against your database. Replace <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L192" rel="nofollow">function info()</a> to get the user info from the DB.<br>
 3.) Copy/paste <a href="http://github.com/jasny/SSO/blob/master/broker/index.php#L1%20rel=" nofollow"="">line 1 to 10 from broker/index.php</a> into your own site. Replace <a href="http://github.com/jasny/SSO/blob/master/broker/login.php" rel="nofollow">broker/login.php</a> with your own login screen.</p>
<p><i>If you need more help, try one of the many PHP forums like <a href="http://forums.devnetwork.net/" rel="nofollow">http://forums.devnetwork.net</a></i></p>
<p>Good luck
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214847", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214918" class="comment ">
								<cite><span class="date">23 February 2010</span>Jack says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels,</p>
<p> Thanks for your help.I follow the what your mention.<br>
 If any doubts kindly help me.</p>
<p>Thanks<br>
Jack
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214918", "Jack")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214922" class="comment ">
								<cite><span class="date">23 February 2010</span>Jack says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>   I have started to implement SSO in my <a href="http://www.test.com/" rel="nofollow">http://www.test.com</a>.<br>
   1. I just down load and copy the your folder in to my test.com.<br>
   2.I made changes that in server/sso.php for credential and get user info based on userName and password.<br>
  3. you said Copy/paste line 1 to 10 from broker/index.php into your own site where i am going to copy the that 10 lines?<br>
  4.i have copy that login screen in my own.</p>
<p>could you please help me to finish the task…</p>
<p>Thanks<br>
Jack
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214922", "Jack")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214924" class="comment ">
								<cite><span class="date">23 February 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Jack</em></b>: Some advise in advance, after each step, make sure that the app is working properly.</p>
<p>Line 1 to 10 from broker/index.php checks if a user is logged in. If 
that is not the case it redirects the client to login.php. If your site 
doesn’t require a user to be logged in, you don’t need it.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214924", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214936" class="comment ">
								<cite><span class="date">23 February 2010</span>Jack says:</cite>
				<blockquote>
					<p>Hi Aranold,</p>
<p>  Thanks for your advise. App is working fine and i integrate your 
code in my site and logged in my site of your broker login and after 
that i refresh your demo <a href="http://sso-alex.adaniels.nl/index.php" rel="nofollow">http://sso-alex.adaniels.nl/index.php</a> its logging in with out log of again and if log out your demo site in mysite broker also logout.<br>
So i reached the single sign on or i need to do any thing else……<br>
Kindly explain to finish the task….</p>
<p>Thanks<br>
Jack
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214936", "Jack")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-214939" class="comment ">
								<cite><span class="date">23 February 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Jack</em></b> I don’t understand your last comment.</p>
<p>In the end you should be using your own SSO-server and SSO-brokers. 
The brokers are your websites which share their authentication. Based on
 the article and my previous comments you should be able to implement 
your own SSO solution.</p>
<p><i>Please remember that this is not a help forum.</i>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-214939", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-216608" class="comment ">
								<cite><span class="date">18 March 2010</span>David says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>I have downloaded the files from github and ran it on Linux and 
Windows, but I couldn’t make it work properly. Maybe I’m missing 
something, but there’s a strange problem.<br>
Suppose that you copy the directory broker with a new name like broker2.
 Now it’s supposed to have SSO between /broker and /broker2 but it’s 
both of them work separately and once logged in /broker , there’s no SSO
 in /broker2<br>
The most strange part is that on windows they work completely separate, 
but on Linux once you log in /broker and then open a page to /broker2 , 
you will be logged out of /broker !<br>
Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-216608", "David")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-216799" class="comment ">
								<cite><span class="date">19 March 2010</span>vij says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>i have made changes as mentioned above.<br>
i made changes as </p>
<p>server/sso.php</p>
<p> array(‘secret’=&gt;”abc123″),<br>
        ‘BINCK’ =&gt; array(‘secret’=&gt;”xyz789″),<br>
		‘UZZA’ =&gt; array(‘secret’=&gt;”rino222″),<br>
        ‘AJAX’ =&gt; array(‘secret’=&gt;”amsterdam”),<br>
        ‘LYNX’ =&gt; array(‘secret’=&gt;”klm345″),<br>
    );</p>
<p>    /**<br>
     * Information of the users.<br>
     * This should be data in a database.<br>
     *<br>
     * @var array<br>
     */<br>
    protected static $users =”select * from mdl_user where username=’$username’ AND password=’$password’”;</p>
<p>    and</p>
<p>IN BROKER/sso.php as<br>
&lt;?php<br>
/**<br>
 * Helper class for broker of single sign-on<br>
 */<br>
class SingleSignOn_Broker<br>
{<br>
	/**<br>
	 * Pass 401 http response of the server to the client<br>
	 */<br>
	public $pass401=false;</p>
<p>    /**<br>
     * Url of SSO server<br>
     * @var string<br>
     */<br>
    public $url = "<a href="http://localhost:81/broker/sso.php&amp;quot" rel="nofollow">http://localhost:81/broker/sso.php&amp;quot</a>;;</p>
<p>    /**<br>
     * My identifier, given by SSO provider.<br>
     * @var string<br>
     */<br>
    public $broker = "LYNX";</p>
<p>    /**<br>
     * My secret word, given by SSO provider.<br>
     * @var string<br>
     */<br>
    public $secret = "klm345";</p>
<p>    /**</p>
<p>i am getting login page tats all.. nothing is working
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-216799", "vij")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-216816" class="comment ">
								<cite><span class="date">19 March 2010</span>Sam says:</cite>
				<blockquote>
					<p>Hi,<br>
Thanks for a great sso implementation.<br>
I did implement it with database(actually using webservices provided by 
one of our .net site) in my local server and every thing works great.<br>
The problem is when I uploaded it to live server.the first time i load 
the site, it goes directly to my sso_server.php file(seems it redirects 
physically ).<br>
second time i load the site, i get 406 error.<br>
IF i clear my cookies, the same thing happens.<br>
Is it some kind of settings i need to do ffor production?<br>
we have a linux dedicated box with apache and php 5.12<br>
have mamp in may local computer on mac.<br>
Other thing.<br>
I do get 406 error in my local computer some time. I think it’s when I 
don’t logout and local cookie expires. Guess something with session 
expire. butright now i am really looking to make this thing work on my 
real server.<br>
Thanks for a great implementation.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-216816", "Sam")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-216988" class="comment ">
								<cite><span class="date">23 March 2010</span>dacus says:</cite>
				<blockquote>
					<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 406 status: “Not attached”.’ in 
C:\apache2triad\htdocs\SSO\sso\broker\sso.php:161 Stack trace: #0 
C:\apache2triad\htdocs\SSO\sso\broker\index.php(5): 
SingleSignOn_Broker-&gt;getInfo() #1 {main} thrown in 
C:\apache2triad\htdocs\SSO\sso\broker\sso.php on line 161 </p>
<p>please help me…</p>
<p>i use windows 7 and apache2triad with PHP 5.1.2</p>
<p>thanks before…
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-216988", "dacus")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-216994" class="comment ">
								<cite><span class="date">23 March 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><em><b>David</b></em> Make sure that the brokers are configured with different identifiers.</p>
<p><em><b>vij</b></em> Changing $users to a database query won’t work. This example doesn’t have database support. You need to add that yourself. See <a href="#comment-214847" rel="nofollow">comment 87</a>.</p>
<p><em><b>Sam</b></em> Make sure that the symlinks to the session files 
are created correctly. Have a look at the remarks in some of these 
comments about ‘Not attached’ issues. Ask again if you’re unable to fix 
it.</p>
<p><em><b>dacus</b></em> Try manually setting <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L15" target="_blank" rel="nofollow">$links_path in broker/sso.php</a> and make sure you can write to that path.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-216994", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-217003" class="comment ">
								<cite><span class="date">23 March 2010</span>David says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Well my windows machine creates 2 files for 2 brokers I have set ( using the same broker name ) as follows :</p>
<p>1. sess_SSO-LYNX-dfe09fcdc0a9e9d7f31aa39d15e9f794-9d0d2a9eb1468eb324502615d9a427dd<br>
2. sess_SSO-LYNX-7488f04b107e05e943d027531a871688-172c95da16538918869b814bb0fae579</p>
<p>at the time I just visit the broker’s page. when I login, the content
 of the session files changes and includes information. But the wrong 
part is that when I login in /broker1 it only changes one of the session
 files and when I refresh the page on /broker2 it still thinks that I 
have not logged in!<br>
I just downloaded the files again and made no changes on the files. I 
have no idea why it’s not working properly on my machine. Maybe it needs
 some PHP settings that are not set on my machine!<br>
Thank you in advance for your kind help
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-217003", "David")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-217014" class="comment ">
								<cite><span class="date">24 March 2010</span>dacus says:</cite>
				<blockquote>
					<p>hi arnold,</p>
<p>now , i got it</p>
<p>Warning: SimpleXMLElement::__construct(): Entity: line 1: parser 
error : Start tag expected, ‘__construct(’1′) #1 
C:\apache2triad\htdocs\SSO\sso\broker\sso.php(158): 
SingleSignOn_Broker-&gt;parseInfo(true) #2 
C:\apache2triad\htdocs\SSO\sso\broker\index.php(5): 
SingleSignOn_Broker-&gt;getInfo() #3 {main} thrown in 
C:\apache2triad\htdocs\SSO\sso\broker\sso.php on line 143 </p>
<p>thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-217014", "dacus")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-217019" class="comment ">
								<cite><span class="date">24 March 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>David</em></b> Do <b>not</b> use the same name for multiple brokers. A name (identifier) needs to be unique per broker.<br>
Those sess_SSO files should be symlinks to the same session file. Please
 check if this is the case. If this is not the case, check if the attach
 request is done (using fiddler, tamper-data, live-http-headers, or 
something similar).</p>
<p><b><em>dacus</em></b> The <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L192" target="_blank" rel="nofollow">info function in server/sso.php</a> isn’t outputting valid XML or you output other (debugging) text.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-217019", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-217700" class="comment ">
								<cite><span class="date">1 April 2010</span><a href="http://dev2.nutraceuticalsworld.com/" rel="external nofollow" class="url">Sam</a> says:</cite>
				<blockquote>
					<p>Hi,<br>
Though it works on server( I changed the links path location to save it 
in a httpdocs folder. using db slow downs. )seems it was permission 
issue.<br>
Now the problem<br>
I don’t think I can explain what’s going wrong with me, but why do we have thisin broker constructor, inside $auto_attach loop.<br>
header(“Location: ” . $this-&gt;getAttachUrl() . “&amp;redirect=”. urlencode(“http://{$_SERVER["SERVER_NAME"]}</p>
<p>I have ajax request posting some variable. The issue is when I don’t 
logout, or say I visited the page after some time(it could be cookie 
expire time), it popsup saying ( the server is redirecting, would you 
like to send the form data you sent). This is because I send post data 
to a page, and when it tries to auto attach it the redirection call 
blocks it askign to send form data. This is only for ajax requests.<br>
Surprisingly, this wont happen all the time. it’s just if I visit one 
page and come back after some time. Secondly it’s not consistent too.<br>
any clue?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-2/#comment-217700", "Sam")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-218643" class="comment ">
								<cite><span class="date">4 April 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Sam</em></b> When using AJAX, don’t use auto attach. Using SingleSignOn_Broker as a controller, assumes you are doing ajax. <a href="http://github.com/jasny/SSO/blob/master/ajax-broker/sso.php#L222" target="_blank" rel="nofollow">Line 222 to 229</a> sets $auto_attach to false and enables 401 passing. </p>
<p>With AJAX, the Javascript client should check if the token cookie 
exists. If not, it should attach by getting the attach URL and loading 
it in an <img> tag. To make sure that you don’t get ‘Not attached’ 
errors, the lifetime of the token-cookie needs to be smaller than that 
of the session.</p>
<p>Alternatively you can pass 406 results, like 401 results are passed. 
On a 406 reattach and try again. Make sure you only do this retrying 
once, not to create a dead-loop.</p>
<p>Make sure you’ve read the <a href="#using_ajax_rich_internet_application" rel="nofollow">‘Using AJAX / Rich Internet Application’</a> paragraph.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-218643", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-219633" class="comment ">
								<cite><span class="date">7 April 2010</span>Sam says:</cite>
				<blockquote>
					<p>Thanks Arnold,<br>
I appreciate your responses. I am getting close.<br>
I have one issue though. If I do not have a session attached to a 
broker, and I do a post request, firefox will popup with “This web page 
is being redirected to a new location. Would you like to resend the form
 data you have typed to the new location?”<br>
It’s again because of that 307 redirect. Can’t I use curl request to attach instead of header().<br>
Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-219633", "Sam")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-220274" class="comment ">
								<cite><span class="date">9 April 2010</span>Maxime says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Thank you for this great article. I’ve implemented my own SSO Client / Broker / Server on Symfony (largely) inspired by yours.<br>
So far, everything’s fine ! I’ve used HTTPS along the whole process to ensure there won’t be any session hijack.</p>
<p>Again, thanks a lot for this great explaination.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-220274", "Maxime")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-223835" class="comment ">
								<cite><span class="date">21 April 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><em><b>Sam</b></em> No you can’t use curl to attach. The broker 
doesn’t know the session of the client at the SSO server. Otherwise this
 whole method would not be needed in the first place. Attaching always 
takes place through the client (browser).</p>
<p>Attach on first visit on your website. Remember that attaching is not
 the same as logging in. It simply means that you have a session running
 at the SSO server and that the broker is attached to it. You can use it
 to log in at any time.</p>
<p>OR</p>
<p>Don’t use a redirect (using header) to attach. Instead you can place an <img> node. Use AJAX to get the source of the image with the getAttachUrl() method. Use Javascript to write an <img> node.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-223835", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-228260" class="comment ">
								<cite><span class="date">6 May 2010</span>remo says:</cite>
				<blockquote>
					<p>Hi arnold, thanx for the download. Im not getting any errors 
while  accessing the two different brokers from my client but they are 
being independent. when i login at one broker and refresh the other 
broker page it still shows the login page, not showing the user info. im
 not able to understand where it is going wrong. please help.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-228260", "remo")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-228292" class="comment ">
								<cite><span class="date">6 May 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Remo</em></b> have a look at the cookies from the SSO 
server. See if the session file is created correctly and if there is 
symlink linking to it.</p>
<p>Also there are issues when running the broker or server on your local computer.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-228292", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-231456" class="comment ">
								<cite><span class="date">17 May 2010</span>muswanto says:</cite>
				<blockquote>
					<p>hi arnold, thnx for your sso source code..but i want to connect user name to database(mysql),can you halp me?thnx before..:)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-231456", "muswanto")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-236384" class="comment ">
								<cite><span class="date">5 June 2010</span><a href="http://stylephp.com/" rel="external nofollow" class="url">Raju Mazumder</a> says:</cite>
				<blockquote>
					<p>Hi,<br>
I have been used your solution with one of my zend framework project.<br>
I had o customize your solution to use with zend framework.</p>
<p>It was working with php 5.2 but whenever I have upgraded my php 
version 5.3 it is not working. I have been debug your source code I 
don’t find anything to create problem with php 5.3.</p>
<p>It is now all the time create new session and session expire for every request.</p>
<p>Do you think is there anything which will not work with php 5.3? I am looking forward your suggestion<br>
thanks<br>
Raju Mazumer
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-236384", "Raju Mazumder")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-245062" class="comment ">
								<cite><span class="date">3 July 2010</span>Marty says:</cite>
				<blockquote>
					<p>I have the same proble like David. The script is running on linux server – php 5.2.6<br>
Where is the problem ?<br>
please, help me.<br>
thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-245062", "Marty")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-245370" class="comment ">
								<cite><span class="date">4 July 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Marty</em></b> Not attached means that PHP failed to 
create the symlink in function ‘attach()’ of server/sso.php. With a bit 
of PHP skills you should be able to figure out why. First of all check 
the HTTP requests that the client does (using firebug) and see if it 
calls server/sso.php in the first place.</p>
<p>Good luck
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-245370", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-245494" class="comment ">
								<cite><span class="date">5 July 2010</span>Marty says:</cite>
				<blockquote>
					<p>Where I check HTTP requests, is it Firebug-&gt;Net ? But there is only GET sso-broker.web.com<br>
I can try it, what Thiet Doan wrote(MySQL without symlink), but there is still the same error.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-245494", "Marty")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-245644" class="comment ">
								<cite><span class="date">6 July 2010</span>Marty says:</cite>
				<blockquote>
					<p>At the first visit I am redirected to sso server with this error :<br>
Warning: file_exists() [function.file-exists]: open_basedir restriction 
in effect. 
File(/var/lib/php5/sess_SSO-BINCK-8acf06bc3a44412293e1d0bc5fae5146-44158a9d368cd1ff913349943e63a204)
 is not within the allowed path(s): (/home/www/web.com:/tmp) in 
/home/www/web.com/sso-server/sso.php  on line 170</p>
<p>Fatal error: Failed to attach; Symlink wasn’t created. in /home/www/web.com/sso-server/sso.php on line 171</p>
<p>Thanks for advice
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-245644", "Marty")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-245656" class="comment ">
								<cite><span class="date">6 July 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Marty</em></b> open_basedir is a PHP setting that a 
(crappy) shared hosting might set to prevent you from accessing the 
session files. You can do 2 things:</p>
<p>1.) Set <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L15" rel="nofollow">$links_path in server/sso.php</a>. This forces the SSO server to use handle attached sessions himself instead of using symlinks.</p>
<p>2.) Store your sessions in an alternative (assessable) path by setting <a href="http://nl.php.net/manual/en/session.configuration.php#ini.session.save-path" rel="nofollow">session.save_path</a>. You can do this in an .htaccess file</p>
<pre>php_value session.save_path /var/www/example.com/tmp
</pre>
<p>In both cases make sure that the path is not accessible for your website visitors.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-245656", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-246273" class="comment ">
								<cite><span class="date">9 July 2010</span><a href="http://blog.stefan-macke.com/" rel="external nofollow" class="url">Stefan</a> says:</cite>
				<blockquote>
					<p>Arnold, Thanks for this great framework!</p>
<p>I’ve used it to glue WordPress, TYPO3, Scuttle, MyBB, and MediaWiki 
together by using LDAP authentication against Active Directory. I wrote 
authentication plugins for every application that use their own 
SSOProvider. Now our intranet users only need to authenticate once! :-)</p>
<p>Btw, I had to set our cookie timeout to 8h via session.gc_maxlifetime
 = 28800 so that the users don’t have to login again after 24 minutes 
(PHP’s default value).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-246273", "Stefan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-246871" class="comment ">
								<cite><span class="date">13 July 2010</span><a href="http://www.johnadigue.com/" rel="external nofollow" class="url">John Adigue</a> says:</cite>
				<blockquote>
					<p>Hi Arnold, thanks for this great tuts. Have a question.<br>
When the first visit broker sends a redirect to the server.<br>
Would my SEO will be affected when implementing it to my sites? because I’m planning to put the login form on the index page.<br>
Please advice.</p>
<p>Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-246871", "John Adigue")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-246876" class="comment ">
								<cite><span class="date">13 July 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>John</em></b> First of I’m not an SEO expert in any form.
 I guess it depends on how you implement this. If you implement is as 
described above I’d say yes. Google probably doesn’t like to be ping 
ponged around.</p>
<p>An option is not to directly attach when a client visits your site. 
Instead when a user tries to log in, first save his username/password in
 a session and redirect to attach. After the client is attached and 
redirected back to the broker, let the broker authenticate the user.</p>
<p>Another option is to skip the redirecting completely and solve this 
with javascript. How to do this is described above. This will work if 
your login form uses AJAX, but also with normal HTML forms.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-246876", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-249266" class="comment ">
								<cite><span class="date">22 July 2010</span><a href="http://ajeed.blogdns.net/" rel="external nofollow" class="url">Lonjan</a> says:</cite>
				<blockquote>
					<p>Yo man,<br>
You doing a very good job..answering all questions over and over again..<br>
I really appreciate your effort on helping other ppl, even though, some of the question is already answered by you previously..</p>
<p>Thanks again mate!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-249266", "Lonjan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250291" class="comment ">
								<cite><span class="date">27 July 2010</span><a href="http://phun-ky.net/" rel="external nofollow" class="url">Alexander Vassbotn Røyne</a> says:</cite>
				<blockquote>
					<p>I’m trying to wrap my head around the code you’ve made.</p>
<p>I’ve implemented the code (ajax version) and altered brokers/server to comply with my backend. </p>
<p>I get logged in (well, it returns 1 when i use the correct 
credentials, but no cookies or sessions are saved on the client side. Is
 this how it should work?</p>
<p>How can I check if a user is logged in for all services, if not a 
cookie/session is set? Seems kinda redundant to check the sso server for
 every service on one page.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250291", "Alexander Vassbotn Røyne")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250292" class="comment ">
								<cite><span class="date">27 July 2010</span><a href="http://phun-ky.net/" rel="external nofollow" class="url">Alexander Vassbotn Røyne</a> says:</cite>
				<blockquote>
					<p>Some more info:<br>
I am not using the jaml thingy, it wouldnt work, so i made a simple login form and ajax script instead.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250292", "Alexander Vassbotn Røyne")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250295" class="comment ">
								<cite><span class="date">27 July 2010</span><a href="http://phun-ky.net/" rel="external nofollow" class="url">Alexander Vassbotn Røyne</a> says:</cite>
				<blockquote>
					<p>Hm, if I load the class with true</p>
<p>$ctl = new SingleSignOn_Broker(true);</p>
<p>a session cookie is created.</p>
<p>but, i get a 307 temporary redirect on the ajax request, and before 
the redirect happens, i get a prompt asking me if its ok to send form 
data..
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250295", "Alexander Vassbotn Røyne")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250309" class="comment ">
								<cite><span class="date">27 July 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Alexander</em></b> The $auto_attach argument means that 
the server will automatically redirect a client to the server if it 
detects that the client is not attached. You don’t want this use ajax, 
so keep this to false.</p>
<p>In javascript you should check if the session_token cookie exists. If
 not call sso.php?cmd=getAttachUrl with ajax. This will set the 
session_token cookie and return a url. That url is to the sso-server and
 can therefore not be requested with ajax. Open that URL in an image 
instead. As soon as that image is loaded, the client is attached and the
 broker can make requests to the server. </p>
<p>Note that session_token has nothing to do with PHP sessions. This 
example stores no information about the client on the broker. There is 
no reason why you can’t do that if you wish. You need to write that 
yourself though ;).</p>
<p>About checking with the SSO server. Note that the server will not 
push any information to the SSO broker. This is strictly a polling 
service. This means that an SSO broker can know that a client has logged
 off on a different broker by asking the server. If you don’t care about
 single sign-off, just call getInfo() once and store it in a session on 
the broker.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250309", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250823" class="comment ">
								<cite><span class="date">28 July 2010</span>hucs says:</cite>
				<blockquote>
					<p>hi. Arnold </p>
<p>when logined <a href="http://sso-alex.jasny.net/index.php" rel="nofollow">http://sso-alex.jasny.net/index.php</a> ,<br>
how to generated <a href="mailto:shanghai@sso-binck.dutchc5">shanghai@sso-binck.dutchc5</a>  cookie?</p>
<p>My English is bad, do not know whether what I mean。</p>
<p>Thanks ！
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250823", "hucs")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-250850" class="comment ">
								<cite><span class="date">28 July 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>hucs</em></b> You don’t, that not possible and not 
needed. Each broker has it’s own cookie. The session cookie is from 
sso-server.jasny.net. Please read the article again. It seems like 
you’re missing the point.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-250850", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-253467" class="comment ">
								<cite><span class="date">2 August 2010</span><a href="http://blog.kacperos.pl/" rel="external nofollow" class="url">Kacper</a> says:</cite>
				<blockquote>
					<p>Great tip! Thanks!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-253467", "Kacper")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-254082" class="comment ">
								<cite><span class="date">4 August 2010</span>Silver says:</cite>
				<blockquote>
					<p>Good. I just try to write an SSO application for several 
decentralized web applications. Each application will be located in 
different and independent domain if it’s possible, and they will use the
 same SSO-application to verify and authenticate the user. I think your 
solution is good, but may it will not suitable for this situation. In 
your system, if I want to sign-up any application, I need to input user 
information for each one, and I just think it’s possible to use an 
central user validation system, and restore one copy of the information 
of the user. Seems your system doesn’t work for it. So..do you have any 
good ideas? Would like to know it if you can write email to me. well I 
wish! :) Good luck!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-254082", "Silver")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-254151" class="comment ">
								<cite><span class="date">4 August 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Silver</em></b> The method described here does exactly 
what you want (I think). Only the SSO-server contains the information 
about the user. The SSO-brokers will communicate to the SSO-server 
continuously.</p>
<p>In my example the SSO-server has only 2 API calls: login and getInfo.
 However, after you’ve attached you can do all kinds of things. Push 
user data, create a cart that works across all brokers, etc. The sky is 
the limit ;).</p>
<p>Best way to think about it is a shared session + shared DB across different domains/systems.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-254151", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-254581" class="comment ">
								<cite><span class="date">5 August 2010</span>Silver says:</cite>
				<blockquote>
					<p>Yeah, you are right. Thanks for your message. I am still working
 on my own SSO-Library. Let me tell you what’s my idea, and this is 
first part of it. You know that I think there are four different 
situation to be meet when to make a share user validation system. (note,
 in the context, “application” is any application to use “sso-server” to
 authenticate users)</p>
<p>1. All applications are on the same domain, so a local Library is good enough.<br>
2. All applications will be located in different sub domains of the same domain. Need a SSO server.<br>
3. All applications will be located in different domains. Need a SSO server.<br>
4. Hyper-one involves any of the situation above. (?)</p>
<p>And in each situation, the first things’ first is not how to 
communicate with others, but how do you do with the architecture of that
 system. I mean, how do you make it works for these applications, and 
make it more effective and security? I think there are two way to put 
the user information across different application:</p>
<p>1. Storing all different user information in the same server, so when
 the application need to know the information, it will need to get those
 user information from sso-server.<br>
2. Just storing the share part of user information, I mean “username, 
password, email validation, recovery question &amp;&amp; answer, 
location”, and any other user information will be stored in its own 
application scope.</p>
<p>Which one is good? I think the first one is simply not good, because 
when the application need to know any part of the user information, it 
must use HTTP-REMOTE-CALL/SOAP to get the information from sso-server, 
it will be more heavy and slow.</p>
<p>The second one is good and simple, the sso-server will be accessed 
only in register/login/recovery/change password. The any other part of 
user profile will be stored in the application, and the application will
 load it from its own scope, so it needn’t to use HTTP-REMOTE-CALL/SOAP 
or else likes. (What’s google account’s idea?)</p>
<p>What’s your idea? :) (BTW, I take my own consideration of that 
problem, and want to know your idea well if you are willing and free to 
tell me. Anyway like to learn from you, if luckily for me. To be 
continued. The next part – I want to discuss the communication way in 
different situation – register/login/recovery password/change 
password/even more)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-254581", "Silver")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-254592" class="comment ">
								<cite><span class="date">5 August 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Silver</em></b> About the 4 situations: You only need to 
use an SSO-server if the applications are different domains. If the 
applications are on the same domain, you can simply have a single 
cookie.</p>
<p>Where to store what information? That completely depends on your 
situation. All the information you need across applications, should be 
supplied by the SSO-server. This includes volatile data (sessions) as 
well as non-volatile data (database). Data that is specific to 1 app, 
can be stored by that app.</p>
<p>Google does not do SSO, they only do shared authentication. If I’m 
logged into iGoogle and goto YouTube, I still need to login there. 
OpenID covers shared authentication.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-254592", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-254678" class="comment ">
								<cite><span class="date">5 August 2010</span>Silver says:</cite>
				<blockquote>
					<p>Thank you very much. Very appreciate your works, and I learned a lot from it. Thanks again. :/
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-254678", "Silver")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-260867" class="comment ">
								<cite><span class="date">17 August 2010</span>zapatista says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>i’ve try ur work with different domain, my config broker</p>
<p>public $url = “http://mygoogleconnect.tld/jasny/server/sso.php”;</p>
<p>and i tested with url<br>
<a href="http://mytwitterclient.tld/jasny/broker/" rel="nofollow">http://mytwitterclient.tld/jasny/broker/</a></p>
<p>why phpsession not generated only session_token, can u pleaz help me</p>
<p>thanx
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-260867", "zapatista")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-261334" class="comment ">
								<cite><span class="date">17 August 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>zapatista</em></b> The broker doesn’t has a session, only
 the server has a session. Any information you store in a session on the
 broker is *not* shared with other brokers.</p>
<p>Also read comment <a href="#comment-254592" rel="nofollow">#129</a>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-261334", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-264886" class="comment ">
								<cite><span class="date">23 August 2010</span>williamjlp says:</cite>
				<blockquote>
					<p>On login page, How can access to $_SESSION['username']?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-264886", "williamjlp")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-264913" class="comment ">
								<cite><span class="date">24 August 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>williamjlp</em></b> Please read the previous comments. There is no session on the brokers. You need to request the username from the SSO server.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-264913", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-268751" class="comment ">
								<cite><span class="date">31 August 2010</span>ar_raudy says:</cite>
				<blockquote>
					<p>@Arnold, thanks for your nice tutorial…<br>
I have some question. I hope you can answer them :<br>
1. I get task to build a system that can handle (using SSO) some domain 
that have some different database server. what must I do to that. must I
 move all of the user information from all database server to just one 
database server?can I use LDAP to implement that purpose? (I’m sorry, 
I’m newbie :))<br>
2. can you give me some advice about framework in PHP for that purpose ?</p>
<p>thanks alot for your answer..
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-268751", "ar_raudy")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-268777" class="comment ">
								<cite><span class="date">1 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>raudy</em></b> 1. The SSO server should hold all login 
credentials. The broker should not hold that information. You can do 
authentication anyway you are doing it now. Using a MySQL db is most 
common, but LDAP is possible as well.</p>
<p>2. There is no framework I know that has this (or something similar) 
implemented. Zend Framework could be easily extended to have this 
feature. You will need to program that yourself though.</p>
<p>Good luck
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-268777", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-269582" class="comment ">
								<cite><span class="date">2 September 2010</span><a href="http://www.gotra.org/" rel="external nofollow" class="url">Katravalli</a> says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels,<br>
Your SSO is very much useful for our site(s). But need a small 
clarification from you. As in earlier post somebody also asked that how 
to display/print SESSION Value (Username, though which was used for 
logged in). You given reply stating that use SSO Sever to call session 
variable.<br>
But i’m unable to retrieve user information from Server SSO. Can you 
please give a brief note and solution how to call the user details or 
session from Server SSO.<br>
If u can explain it is very much useful for me as well as somany users using this script.<br>
Regards<br>
Pavan
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-269582", "Katravalli")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-269835" class="comment ">
								<cite><span class="date">3 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Pavan Katravalli</em></b> Well to be honest, the main article tries to explain just that.</p>
<p>There is 1 session, which lives on the SSO server. Let’s say that the
 broker would know the session id of the client, the broker could act 
like the client. However since the session id is in a cookie a another 
domain, the broker has no way to fetch that session id.</p>
<p>Instead, the broker will tell the client to please tell the server 
that he (the broker) is privileged to act on behalf of the client. The 
server will respect that, allow the broker to use the session on the 
server. That’s the basic trick.</p>
<p>Any calls that the client would normally make directly to a website 
regarding a session, like logging in, adding products to a cart, etc, 
can now be done by the broker instead. Since the broker is a machine and
 not a human, the server should return XML of JSON instead of HTML.</p>
<p>That’s all there is to it :)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-269835", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-269950" class="comment ">
								<cite><span class="date">3 September 2010</span><a href="http://www.gotra.org/" rel="external nofollow" class="url">Katravalli</a> says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels,<br>
Thanks for your reply and I understand what you are saying but unable to
 retrieve and print the user session info from server. Can you please 
give simple example that how to call and print user data. For example, 
If login with a username “katravalli” and password “abc123″…..  after 
login I would like to welcome the user something like “Welcome 
Katravalli”…. Here is my problem…. I’m unable to print Username after 
welcome…. unable to call from server sso…<br>
Hope you got my point…. can u pls give simple example how it is.. and how to call…!!!!<br>
regards<br>
pavan
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-269950", "Katravalli")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-270119" class="comment ">
								<cite><span class="date">3 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>The client sends the login credentials to the broker. The broker sends them to server. It is just the middle man.</p>
<p>You should <b>not</b> see the broker as a special kind of server. The
 broker holds no information. You can see it as a special kind of 
client. Therefore it needs to request any information from the server 
using an HTTP request, just like a regular client would.</p>
<p>In short: If the broker wants to print the name of the user, it sends
 an HTTP request to the server asking the name (and perhaps more user 
details).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-270119", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-270212" class="comment ">
								<cite><span class="date">3 September 2010</span>Katravalli says:</cite>
				<blockquote>
					<p>I didn’t get you Arnold. If you can give an example it may be 
understandable to my lazy brain. Just i need how would I print username 
after login… through HTTP request or whatever you say.<br>
Pls explain with example Arnold<br>
Regards
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-270212", "Katravalli")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-270222" class="comment ">
								<cite><span class="date">3 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Katravalli</em></b> You can find the example code on github <a href="http://github.com/jasny/SSO" rel="nofollow">http://github.com/jasny/SSO</a>.</p>
<p>On <a href="http://github.com/jasny/SSO/blob/master/broker/sso.php#L152" rel="nofollow">line 152 of broker/sso.php</a>
 you see a function where the broker requests the information of the 
currently attached user. After the broker has gotten that data, it can 
print it. An example of this is <a href="http://github.com/jasny/SSO/blob/master/broker/index.php" rel="nofollow">broker/index.php</a></p>
<pre lang="php">   $sso = new SingleSignOn_Broker();
   $user = $sso-&gt;getInfo();  // Requests the user info from the SSO server
   if ($user) {
       echo $user-&gt;name; // Outputs the name of the user
   } else {
       echo "No user logged in";
   }
</pre>
<p>This is all the help I can give you. All the information you need is in this article and in the demo software.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-270222", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-270250" class="comment ">
								<cite><span class="date">3 September 2010</span>Katravalli says:</cite>
				<blockquote>
					<p>Thanks Arnold. Some how, i’m on the track now.<br>
Regards
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-270250", "Katravalli")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-270439" class="comment ">
								<cite><span class="date">4 September 2010</span>ar_raudy says:</cite>
				<blockquote>
					<p>@arnold, I hope you can give me some solution for my thinking.<br>
this source didnt use LDAP server, right? when I want to use Database 
server or LDAP server to get some user information I must modify this 
source. how about you about using LDAP server or database server (like 
MySQL) for multiple and big applications ?. what i must use from both 
?when multiple an big application have their own database,  how to 
integrate them ?</p>
<p>thanks alot for your answer @arnold :)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-270439", "ar_raudy")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-271663" class="comment ">
								<cite><span class="date">5 September 2010</span><a href="http://websir.info/" rel="external nofollow" class="url">Lumpas</a> says:</cite>
				<blockquote>
					<p>Good solution, thanks for sharing.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-271663", "Lumpas")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-273778" class="comment ">
								<cite><span class="date">8 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>ar_raudy</em></b> The SSO server does all the authentication. You can use any method you would normally use there.</p>
<p>Replace the <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L133" rel="nofollow">login</a>, <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L149" rel="nofollow">loutout</a> and <a href="http://github.com/jasny/SSO/blob/master/server/sso.php#L192" rel="nofollow">info</a> functions of server/SSO.php.</p>
<p>You can find info about php ldap in the manual: <a href="http://php.net/manual/en/book.ldap.php" rel="nofollow">http://php.net/manual/en/book.ldap.php</a>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-273778", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-274481" class="comment ">
								<cite><span class="date">9 September 2010</span>Adrian Pawlik says:</cite>
				<blockquote>
					<p>Thank you Arnold for the library! I’ve noticed that SSO server 
won’t work if request_order is not set correctly in php.ini. Make sure 
it contains cookie array (request_order = GP_C_). SSO server class uses 
$_RESQUEST to get session_id from cookie sent by broker.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-274481", "Adrian Pawlik")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-277977" class="comment ">
								<cite><span class="date">14 September 2010</span>ar_raudy says:</cite>
				<blockquote>
					<p>thank you very much @arnold,…<br>
sorry, what you mean to 307 and 200 in that picture?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-277977", "ar_raudy")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-277991" class="comment ">
								<cite><span class="date">14 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>ar_raudy</em></b> Those are HTTP status codes: <a href="http://en.wikipedia.org/wiki/List_of_HTTP_status_codes" rel="nofollow">http://en.wikipedia.org/wiki/List_of_HTTP_status_codes</a>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-277991", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-282804" class="comment ">
								<cite><span class="date">22 September 2010</span>manoj says:</cite>
				<blockquote>
					<p>i Want to implement this on codeigniter with tank auth
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-282804", "manoj")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-284307" class="comment ">
								<cite><span class="date">25 September 2010</span>Adrian Pawlik says:</cite>
				<blockquote>
					<p>I found another problem. This solutions works if each website 
has own domain. When you try to set up 2 applications in the same 
domain, i.e. example.com/ and example.com/app2/ this will not work 
becouse the website user enters firstly creates cookie (session_token) 
and second application will use it while asking SSO for authentication.</p>
<p>The solution is to set diffrent names for session_token cookie for each broker, for example session_token_brokername.</p>
<p>In this case it works for the same and for diffrent domains.</p>
<p>A.P.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-3/#comment-284307", "Adrian Pawlik")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-285744" class="comment ">
								<cite><span class="date">27 September 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Adrian Pawlik</em></b> The whole reason of using this SSO
 solution is so you can share session information (like user 
credentials) across multiple domains. There is no good reason to use 
this on a single domain (other than testing purposes).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-285744", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-289956" class="comment ">
								<cite><span class="date">5 October 2010</span><a href="http://y2kwor.org/" rel="external nofollow" class="url">ob1</a> says:</cite>
				<blockquote>
					<p>Finally !<br>
Something that works !</p>
<p>Nice tutorial, you saved many peoples time<br>
Not even one tutorial, except this one, on the subject of shareing cookies, sessions across multiple domains.</p>
<p>Good work ^_^
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-289956", "ob1")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-290099" class="comment ">
								<cite><span class="date">5 October 2010</span>Paul says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>Firstly, congratulations on some great coding – I’ve implemented your
 solution on a range of my blogs and it’s working wonderfully.  I’ve 
done a lot of research into SSO and your solution is by far the most 
efficient and easy to implement.  </p>
<p>The only downside that I’ve encountered so far is problems with 
persistence when the browser is closed, reopened, and a new session is 
started.  Logins persist for domains that have been visited with the 
previous session, but not for domains that haven’t been visited in the 
previous (logged in) session.  </p>
<p>For example:<br>
exampleA.com, exampleB.com and exampleC.com are all using your 
SingleSignOn_Broker class (php, not ajax) to check whether a client is 
logged in.  Assume the sso server is sso.example.com (although I don’t 
think it’s relevant).</p>
<p>A client logs in via exampleA.com, then goes to exampleB.com….. the client will still be logged in.  </p>
<p>However, if the client then closes the browser (killing the current 
session) and reopens it, the client will still be logged in to 
exampleB.com, but if they go to exampleC.com, they will no longer be 
logged in.  Bear in mind that if the client doesn’t close the browser, 
then they appear as logged in across A B and C.</p>
<p>I’ve tried to extend your code to fix this problem but without success.  Have you got any ideas?  I’d really appreciate it.</p>
<p>Thanks – Paul.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-290099", "Paul")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-293628" class="comment ">
								<cite><span class="date">16 October 2010</span><a href="http://buzzknow.com/" rel="external nofollow" class="url">Buzzknow</a> says:</cite>
				<blockquote>
					<p>Hi Arnold, </p>
<p>its really great code!!</p>
<p>i want to try this with CodeIgniter, wish me luck :D</p>
<p>regards
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-293628", "Buzzknow")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-295535" class="comment ">
								<cite><span class="date">21 October 2010</span>Chris says:</cite>
				<blockquote>
					<p>Is this code meant to crash when using PHP’s session_start() 
function. I use a PHP session to maintain persistence of data within my 
site but when I have the function running it seems to stop the SSO code 
working, holds it in an infinate lock where no redirects are occuring, 
it just refuses to load the page, it acts like a super slow connection, 
but when I remove the session_start() function it works fine. I have 
tried figuring out why it iss doing this but cant find where in the 
classes the session_start() function is clashing with other code. Do you
 have any ideas Arnold?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-295535", "Chris")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-314147" class="comment ">
								<cite><span class="date">20 November 2010</span><a href="http://y2kwor.org/" rel="external nofollow" class="url">ob1</a> says:</cite>
				<blockquote>
					<p>Arnold, I wanted to extend script to keep user logged in for 
longer period of time, by setting cookie with expire time for one year.<br>
Are there any drawbacks I could encounter?<br>
How would you do that?</p>
<p>Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-314147", "ob1")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-314206" class="comment ">
								<cite><span class="date">20 November 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>ob1</em></b> That won’t work because the session on the SSO server will already be expired.</p>
<p>You should solve this, as you would solve it without SSO. Let the SSO
 server write a cookie with the username + auth hash and check that to 
automatically log in.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-314206", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-314215" class="comment ">
								<cite><span class="date">20 November 2010</span><a href="http://y2kwor.org/" rel="external nofollow" class="url">ob1</a> says:</cite>
				<blockquote>
					<p>Will Do.<br>
Tnx
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-314215", "ob1")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-317877" class="comment ">
								<cite><span class="date">26 November 2010</span>chris says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>great code.</p>
<p>One question: Is there any simple possibility to secure the login? The username and the password is hand over in plain text.<br>
I think one possibility is to secure each broker. But we have arround 50 brokers so that would be a very expensive solution.<br>
Do you have any idea or advise?</p>
<p>Thanks in advance,<br>
chris
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-317877", "chris")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-319912" class="comment ">
								<cite><span class="date">29 November 2010</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>chris</em></b> You could send over an authorization hash 
instead of the password. This can still be snatched through a man in the
 middle attack, but by using a timestamp it’s only valid for a few 
seconds.</p>
<p><a href="http://www.jasny.net/articles/authentication-without-sessions/" rel="nofollow">http://www.jasny.net/articles/authentication-without-sessions/</a>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-319912", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-322019" class="comment ">
								<cite><span class="date">2 December 2010</span>Binit says:</cite>
				<blockquote>
					<p>Thanks Arnold Daniels. I have wasted my three important days, 
but not get any Script. Finally I have used your script for “Single Sign
 On”. Its really quite simple &amp; easy to use.</p>
<p>Thanks again.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-322019", "Binit")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-322423" class="comment ">
								<cite><span class="date">3 December 2010</span>andrew says:</cite>
				<blockquote>
					<p>Hi, Arnold</p>
<p>What’s this error mean “String could not be parsed as XML”. What should i do?</p>
<p>Thanx,
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-322423", "andrew")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-322650" class="comment ">
								<cite><span class="date">3 December 2010</span>Kadek says:</cite>
				<blockquote>
					<p>Great..!</p>
<p>Thanks for the codes :)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-322650", "Kadek")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336931" class="comment ">
								<cite><span class="date">17 January 2011</span><a href="http://www.barengonline.blogspot.com/" rel="external nofollow" class="url">guntur</a> says:</cite>
				<blockquote>
					<p>I want single sign-on is using the mysql database.<br>
is there any script.. help me<br>
thanks you :)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336931", "guntur")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336932" class="comment ">
								<cite><span class="date">23 January 2011</span><a href="http://blog.eit.kg/2011/01/23/%d1%81%d0%ba%d0%be%d0%bf%d0%b8%d1%89%d0%b5-%d1%81%d1%81%d1%8b%d0%bb%d0%be%d0%ba-%d0%bd%d0%b0-%d1%82%d0%b5%d0%bc%d1%83-sso/" rel="external nofollow" class="url">Скопище ссылок на тему SSO at Electronic Information Technologies</a> says:</cite>
				<blockquote>
					<p>[...] <a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/" rel="nofollow">http://www.jasny.net/articles/simple-single-sign-on-for-php/</a> [...]</p>
				</blockquote>
			</li>
					<li id="comment-336933" class="comment ">
								<cite><span class="date">26 January 2011</span><a href="http://www.barengonline.blogspot.com/" rel="external nofollow" class="url">guntur</a> says:</cite>
				<blockquote>
					<p>Warning: SimpleXMLElement::__construct() 
[function.SimpleXMLElement---construct]: Entity: line 2: parser error : 
Extra content at the end of the document in 
C:\xampp\htdocs\ssoprovider\sso.php on line 143</p>
<p>Warning: SimpleXMLElement::__construct() [function.SimpleXMLElement---construct]: <b>Parse error</b>: syntax error, unexpected ‘”‘ in <b>C:\xampp\htdocs\server\s in C:\xampp\htdocs\ssoprovider\sso.php on line 143</b></p><b>
<p>Warning: SimpleXMLElement::__construct() 
[function.SimpleXMLElement---construct]: ^ in 
C:\xampp\htdocs\ssoprovider\sso.php on line 143</p>
</b><p><b>Fatal error: Uncaught exception ‘Exception’ with message 
‘String could not be parsed as XML’ in 
C:\xampp\htdocs\ssoprovider\sso.php:143 Stack trace: #0 
C:\xampp\htdocs\ssoprovider\sso.php(143): 
SimpleXMLElement-&gt;__construct(‘?</b><b>Parse…’) #1 C:\xampp\htdocs\ssoprovider\sso.php(158): SingleSignOn_Broker-&gt;parseInfo(‘?</b><b>Parse…’)
 #2 C:\xampp\htdocs\ssoprovider\login.php(8): 
SingleSignOn_Broker-&gt;getInfo() #3 {main} thrown in 
C:\xampp\htdocs\ssoprovider\sso.php on line 143
</b></p><div class="yarr"><b><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336933", "guntur")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></b></div><b>
</b><p><b></b></p>
				</blockquote>
			</li>
					<li id="comment-336934" class="comment ">
								<cite><span class="date">10 February 2011</span><a href="http://clickviec.com/" rel="external nofollow" class="url">Lang Nguyen</a> says:</cite>
				<blockquote>
					<p>Dear friend,</p>
<p>good article but i have prolem</p>
<p>When i use session in php.ini with memcache</p>
<p>How to change code support memcahce session in php.ini</p>
<p>Thank
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336934", "Lang Nguyen")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336935" class="comment ">
								<cite><span class="date">13 February 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>guntor</em></b>The result from the SSO server isn’t valid
 XML. Probably there is a server error. Output the result from curl and 
see what is wrong.</p>
<p><b><em>Lang</em></b> Remove <a href="https://github.com/jasny/SSO/blob/master/server/sso.php#L168" target="code" rel="nofollow">line 168 to 172</a>. Now look at <a href="https://github.com/jasny/SSO/blob/master/server/sso.php#L173" target="code" rel="nofollow">the part where I’m attaching using a file</a>. Replace that with code using memcache.</p>
<p>On <a href="https://github.com/jasny/SSO/blob/master/server/sso.php#L78" target="code" rel="nofollow">line 78</a> remove the isset() and replace the file_exists and file_get_contents with memcache.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336935", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336936" class="comment ">
								<cite><span class="date">22 February 2011</span><a href="http://www.barengonline.blogspot.com/" rel="external nofollow" class="url">guntur</a> says:</cite>
				<blockquote>
					<p>I want to change database<br>
protected static $users = array(<br>
         ‘jan’ =&gt; array(‘password’=&gt;”jan1″, ‘fullname’=&gt;”Jan Smit”, ‘email’=&gt;”jan@smit.nl”),<br>
        ‘peter’ =&gt; array(‘password’=&gt;”peter1″, ‘fullname’=&gt;”Peter de Vries”, ‘email’=&gt;”peter.r.de-vries@sbs.nl”),<br>
        ‘bart’ =&gt; array(‘password’=&gt;”bart1″, ‘fullname’=&gt;”Bart de Graaf”, ‘email’=&gt;”graaf@bnn.info”)<br>
    );</p>
<p>with database mysql.. is there any script.. help me
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336936", "guntur")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336937" class="comment ">
								<cite><span class="date">24 February 2011</span>Erik Kloeze says:</cite>
				<blockquote>
					<p>Hello Arnold,</p>
<p>First of all, well coded script! I have read all the comments about 
the ‘Not attached’ error, but I still cannot seem to figure it out. My 
client is running Windows Server 2003 and my server is running Linux.</p>
<p>Symlink is working and also seems to attach. When using fiddler I can
 see a sequence of requests (sso.php?cmd=attach) from the client to the 
server, all with a different broker and checksum and all being 
redirected to the client index.php.</p>
<p>Error reporting (error_reporting(E_ALL)) is enabled in the server script. The only response I get from the client index.php is:</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 406 status: “Not attached”.’ in 
D:\…\sso\sso.php:162 Stack trace: #0 D:\…\sso\index.php(6): 
SingleSignOn_Broker-&gt;getInfo() #1 {main} thrown in D:\…\sso\sso.php 
on line 162</p>
<p>I did have some problems with mod_security in the beginning, but 
after adding some exceptions, I do not recieve errors from this anymore.</p>
<p>I have tried pretty much all the suggetions in the above comments. Do you have any idea what I can try to do?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336937", "Erik Kloeze")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336938" class="comment ">
								<cite><span class="date">25 February 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><em><b>Guntur</b></em> There is no script I know of  Please read <a href="#comment-214847" rel="nofollow">comment 87</a>.</p>
<p><em><b>Erik Kloeze</b></em> Check the symlinks. If they are being 
created correctly, output the contents of the session files. Is there a 
variable ‘client_addr’. Also make sure the server writes the error to 
the (Apache) error log.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336938", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336939" class="comment ">
								<cite><span class="date">27 February 2011</span>Erik Kloeze says:</cite>
				<blockquote>
					<p>The symlink seems to be created, as there is no “Failed to attach; Symlink wasn’t created.” error.</p>
<p>In sessionStart, ‘User session’ there is a client_addr mentioned, in 
the ‘Broker session’ after the session_start there isn’t. After the 
symlink is created, there also is a client_addr in the session file.</p>
<p>I think that altough there is a symlink, the ‘old’ session simply 
isn’t picked up? Adding session_name($sid) before the session_start in 
the ‘Broker session’ also did not work out.</p>
<p>For the errors, as far as I know, all errors show up in the Plesk Log Files.</p>
<p>Any ideas left?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336939", "Erik Kloeze")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336940" class="comment ">
								<cite><span class="date">28 February 2011</span>Erik Kloeze says:</cite>
				<blockquote>
					<p>Hello Arnold,</p>
<p>I did some additional debugging, outputting the session_id in the attach function and the sessionstart function. </p>
<p>When I use the readlink function in the sessionstart function, I get 
the same session_id as in the attach function. Futhermore, the link 
variable in the attach function is equal to the session_id in the 
session_start function (besides the path).</p>
<p>But it still is not working?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336940", "Erik Kloeze")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336941" class="comment ">
								<cite><span class="date">1 March 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Erik Kloeze</em></b> Login using SSH and check what is happening.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336941", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336944" class="comment ">
								<cite><span class="date">15 March 2011</span>tomcat says:</cite>
				<blockquote>
					<p>Dude you got a lot of patience answering these questions eh
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336944", "tomcat")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336945" class="comment ">
								<cite><span class="date">23 March 2011</span>wawan says:</cite>
				<blockquote>
					<p>Greetings,</p>
<p>i’ve try ur work but it seems doesn’t work in multiple sub domain?<br>
what do i have to change if the applicationt are in multiple sub domains?</p>
<p>Tks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336945", "wawan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336946" class="comment ">
								<cite><span class="date">23 March 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><i>Wawam</i></b> If it doesn’t work for sub domain, but does 
work for completely different domains, your session cookie is valid for 
the whole domain. This is set with the <a href="http://www.php.net/manual/en/session.configuration.php#ini.session.cookie-domain" target="_blank" rel="nofollow">cookie-domain</a> ini directive.</p>
<p>If you only need to share a session over sub domains and not over 
different domains, don’t use this SSO solution at all. Simply share the 
PHP session for the different sites.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336946", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336947" class="comment ">
								<cite><span class="date">23 March 2011</span>wawan says:</cite>
				<blockquote>
					<p>Thanks, for your answer. Very appreciate your works, and I learned a lot from it.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336947", "wawan")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336948" class="comment ">
								<cite><span class="date">30 March 2011</span>Goose says:</cite>
				<blockquote>
					<p>Have you ever tried this with PHP and .NET. I am looking for a 
SSO between a PHP website and a .NET website. Can you think of any 
reasons why this wouldn’t work with both?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336948", "Goose")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336949" class="comment ">
								<cite><span class="date">31 March 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p><b><em>Goose</em></b> No, that should work fine. Set up an SSO 
server using PHP. You would need to write a broker in .NET. It needs to 
redirect to the SSO server and than request the data using HTTP, just 
like the PHP broker.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336949", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336950" class="comment ">
								<cite><span class="date">18 April 2011</span><a href="http://offline/" rel="external nofollow" class="url">Ana</a> says:</cite>
				<blockquote>
					<p>Dear Sir,</p>
<p>Pls help me change code support session store on memcache<br>
When i change php.ini file use session memcache code error</p>
<p>I look and research but i dont can change code support memcache<br>
i read all comment of vistit here but i can not change my code support my memcache</p>
<p>Pls help me</p>
<p>Thank verry much </p>
<p>Ana
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336950", "Ana")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336952" class="comment ">
								<cite><span class="date">24 June 2011</span><a href="http://www.krikil.com/index.php/2011/06/simple-single-sign-on-for-php-ajax-compatible/" rel="external nofollow" class="url">Krikil.COM » Blog Archive » Simple Single Sign-On for PHP (Ajax compatible)</a> says:</cite>
				<blockquote>
					<p>[...] Source : Jasny.net [...]</p>
				</blockquote>
			</li>
					<li id="comment-336955" class="comment ">
								<cite><span class="date">23 August 2011</span><a href="http://www.lukebarton.co.uk/" rel="external nofollow" class="url">Luke Barton</a> says:</cite>
				<blockquote>
					<p>For those worrying about SSL certificates for your brokers, 
perhaps you may consider redirecting the client to the server for 
authentication, initiating the session on the server then redirecting 
the client back to the broker?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336955", "Luke Barton")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336956" class="comment ">
								<cite><span class="date">3 October 2011</span>Charles says:</cite>
				<blockquote>
					<p>Hello everyone,</p>
<p>Thanks to the developers for this script; I think it’s the answer to 
my SSO implementation troubles, but I can’t get my head round the 
installation. Apologies for asking what may appear to others to be quite
 “basic” questions, I’m no web guru but can get things done once I see 
the instructions in human-readable language :-)</p>
<p>I have 2 web sites, already set up and running, both LAMP based with 
separate but synchronized user databases (same usernames and passwords 
on both). They are on two separate domains.</p>
<p>What I have done so far:</p>
<p>1. Created subdomain for each site: sso.domain1.com and sso.domain2.com.</p>
<p>2. Uploaded the SSO files to both subdomains, but putting the brokers
 in the root of each subdomain, along with the index and login files.</p>
<p>3. Edited each broker sso.php to reference its own server/sso.php e.g. broker sso.php on sso.domain1.com has the entry</p>
<p>public $url = “http://sso.domain1.com/server/sso.php”;</p>
<p>4. Fill in the other details.</p>
<p>5. Go to <a href="http://sso.domain1.com/" rel="nofollow">http://sso.domain1.com</a> in my browser. See a login page, which I fill with credentials in the server sso.php on domain1.com.</p>
<p>6. Script returns identity, fullname and email, with a logout link.</p>
<p>7. Now for the really important bit: I go to <a href="http://sso.domain2.com/" rel="nofollow">http://sso.domain2.com</a>,
 and because I have the same  “protected static $brokers” and “protected
 static $users” data on both server sso.php files, I was not expecting 
to be asked to log in again.</p>
<p>8. Script takes me to login page on sso.domain2.com. I don’t log in but when I refresh the browser, I get this fatal error:</p>
<p>Fatal error: Uncaught exception ‘Exception’ with message ‘SSO 
failure: The server responded with a 406 status: “Not attached”.’ in 
/home/bizemail/.weh/sso.php:161 Stack trace: #0 
/home/bizemail/.weh/index.php(5): SingleSignOn_Broker-&gt;getInfo() #1 
{main} thrown in /home/bizemail/.weh/sso.php on line 161</p>
<p>I know I’m doing something (maybe many things) wrong, and I’d grateful for pointers to properly install the script.</p>
<p>Regards,</p>
<p>Charles.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336956", "Charles")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-336958" class="comment ">
								<cite><span class="date">10 October 2011</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi Charles,</p>
<p>The developers is me :p. So thanks for your praise. Just doing my bit to make the internet world a better place :)</p>
<p>I looked at what you’re doing. Your creating a multi-master set-up. 
Where all sites are both server and broker. Though interesting, I think 
this approach is making the problem complexer than it needs to be.</p>
<p>Ask yourself the question: <b>Why do I need to have multiple masters?</b></p>
<p>Whatever you come up with, you can probably also do with 1 server, 
even without losing the autonomy. This will make the whole thing much 
easier ;)</p>
<p>Let’s take the following: domain1.com is a fully working website. 
You’ve got your database with your users, an authentication system, etc.
 <i>Cool…</i></p>
<p>Now you’ve got domain2.com which is also a fully working website including database with users, authentication system, etc.</p>
<p>To share the users across the sites your simply copying them between databases. No magic there… but it works.</p>
<p>Does this sound about right?</p>
<p>Now the hard part <i>(which isn’t really that hard)</i>. If users 
login to domain1.com and go to domain2.com you want them automatically 
to be logged in there as well. That’s what SSO does for you.</p>
<p>However you want domain1.com as well as domain2.com both handle the authentication by them self and notify the other one. <i>What a pickle :p</i></p>
<p>Lets take a slightly different approach. The site on domain1.com 
stays how it is, but gets the SSO server software as well. The site on 
domain2.com (and all further domains) get the broker software.</p>
<p>But you want domain2.com to handle authentication himself you tell 
me. Ahh, but that’s the easy part. Instead of domain2.com having to set 
the username and password, just let him send the userid (or username) by
 modifying <a href="https://github.com/jasny/SSO/blob/master/server/sso.php#L133" rel="nofollow">function login() on server/sso.php</a>.</p>
<p>Calling this function will instantly login the user on domain1.com as well.</p>
<p>Just make sure that only a valid broker can call that method and <b>not</b> some evil hacker.</p>
<p>Now you only need domain2.com to check at domain1.com is the user is 
logged in when first visited. Lucky for you, that the broker can already
 do that :D.</p>
<p><i><b>Told you it was easy.</b></i>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336958", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338109" class="comment ">
								<cite><span class="date">21 November 2011</span>marios says:</cite>
				<blockquote>
					<p>Dear Sir,</p>
<p>first of all, i would like to thank you for sharing your code with us.<br>
I would like to ask you if it is possible to test this at localhost.<br>
For example, i have a server (folder jasny-SSO/server) and two brokers (Alex: jasny2-SSO/broker and Binck: jasny3-SSO/broker).<br>
I have connected as jan (username: jan, password: jan1) in the url: <a href="http://localhost/jasny2-SSO/broker/index.php" rel="nofollow">http://localhost/jasny2-SSO/broker/index.php</a> and then i tried to connected to the url: <a href="http://localhost/jasny3-SSO/broker/index.php" rel="nofollow">http://localhost/jasny3-SSO/broker/index.php</a> when i encountered with the login page.<br>
What i should do in order to make this work.</p>
<p>Thank you in advance,</p>
<p>Marios</p>
<p>P.S: I comment the line ;session.auto_start = 0 in my php.ini file.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338109", "marios")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338113" class="comment ">
								<cite><span class="date">22 November 2011</span><a href="http://webos.org/forum/site-updates-announcements/68-mobile-version-forum-3.html#post35773" rel="external nofollow" class="url">mobile version of the forum?</a> says:</cite>
				<blockquote>
					<p>[...] Canada goose business just as '57 udsalg canada goose .  
canada goose vest  canada goose store  canada goose chilliwack bomber  
canada goose expedition parka  canada goose store          canada goose 
montebello parka canada [...]</p>
				</blockquote>
			</li>
					<li id="comment-338116" class="comment ">
								<cite><span class="date">23 November 2011</span>marios says:</cite>
				<blockquote>
					<p>Dear Sir,</p>
<p>once again thank you for your code.<br>
I am writing again because i do not hear from you since today.<br>
I would like to ask you if it is possible to test your code at localhost.<br>
I tried to use two brokers and one server at different folders but it does not work.<br>
I would appreciate if you help me.</p>
<p>Thank you in advance,</p>
<p>Marios
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338116", "marios")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338124" class="comment ">
								<cite><span class="date">28 November 2011</span><a href="http://www.dhtmlextreme.net/" rel="external nofollow" class="url">dhtmlextreme</a> says:</cite>
				<blockquote>
					<p>After studying the model here, i created a slightly different version – using the model to run my site – <a href="http://www.dhtmlextreme.net/" rel="nofollow">http://www.dhtmlextreme.net</a><br>
I just made a blog-post about 2 models – one that runs across subdomains
 on a website and another version that runs across multiple domains and 
subdomains or even within the same website.<br>
I made a plugin for drupal so that the sso can integrate with drupal  –<br>
my server is <a href="http://www.accounts.dhtmlextreme.net/" rel="nofollow">http://www.accounts.dhtmlextreme.net</a><br>
my brokers are <a href="http://www.blogs.dhtmlextreme.net/" rel="nofollow">http://www.blogs.dhtmlextreme.net</a>, <a href="http://www.classrooms.dhtmlextreme.net/" rel="nofollow">http://www.classrooms.dhtmlextreme.net</a> and others.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338124", "dhtmlextreme")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338125" class="comment ">
								<cite><span class="date">29 November 2011</span>butter says:</cite>
				<blockquote>
					<p>Hi Arnold</p>
<p>I have tried the script, i have to say “wow! its damn great!”<br>
It work pretty fine in my local and my testing server.<br>
However, im facing the issue with “406″ stuff, when i place my broker on
 my local (win7) and sso server on test server (linux). I read every 
comments above and tried with several fix. yet i cant get it right.</p>
<p>understand that, this sso suppose to centralise the login auth across
 domains. im confusing about the _server["REMOTE_ADDR"] as it matching 
the IP add from local and server IP and final it goes to invalid 
checksum</p>
<p>please help and appreciate alots…
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338125", "butter")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338126" class="comment ">
								<cite><span class="date">30 November 2011</span>butter says:</cite>
				<blockquote>
					<p>Yes! I got the issue solved.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338126", "butter")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338128" class="comment ">
								<cite><span class="date">5 December 2011</span>wira says:</cite>
				<blockquote>
					<p>Hi Arnold…<br>
I want to implement your code using LDAP, which part should I make a change?<br>
2nd question, I still  confuse with ajax-broker implementation, plus 
your demo site is not working right now, would you active back the demo 
site so I can learn from it?<br>
I really appreciate your kindly help</p>
<p>Thanks for your help…
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338128", "wira")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338138" class="comment ">
								<cite><span class="date">14 December 2011</span>Gowtham says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-336958" rel="nofollow">Arnold Daniels</a>: Hi Arnold I have the Same problem as Charles. Can you please Explain me wat to modify in server/sso.php as mentioned below </p>
<p>“But you want domain2.com to handle authentication himself you tell 
me. Ahh, but that’s the easy part. Instead of domain2.com having to set 
the username and password, just let him send the userid (or username) by
 modifying function login() on server/sso.php .”
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338138", "Gowtham")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338151" class="comment ">
								<cite><span class="date">14 January 2012</span><a href="http://www.adaniels.nl/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>Hi all, the demo’s are currently broken indeed. I need to look 
at that soon. Also I’ve decided to create a full featured lib from this 
example, since I’m still getting a lot of response years after writing 
this article.</p>
<p>Sorry @Gowtham I didn’t reply to you earlier. Since the broker will 
do the authentication, it can simply send the userid to the SSO server 
instead of the username/password.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338151", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338152" class="comment ">
								<cite><span class="date">16 January 2012</span>Sir Đoàn says:</cite>
				<blockquote>
					<p>Thank you so much for this toturial ^^
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338152", "Sir Đoàn")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338153" class="comment ">
								<cite><span class="date">25 January 2012</span>Gougousis Alexandros says:</cite>
				<blockquote>
					<p>Hi! Nice code!<br>
I have used it to create an SSO-based application using the Yii Framework. It’s cool!<br>
I would like to ask you one thing. What is the reason of “attaching” to the SSO-Server?<br>
Why not direclty sending the un-logged client to the SSO-Server for logging? </p>
<p>Anyway,thanks for sharing the code!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338153", "Gougousis Alexandros")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338157" class="comment ">
								<cite><span class="date">8 February 2012</span>Sunil Singh says:</cite>
				<blockquote>
					<p>Hi Arnold, great tutorial, but I still unable to find how to 
achieve this on a PHP CMS, as I am developing two social networking site
 having different concept using Boonex Dolphin CMS of php. But the 
client wants single sign-on on both site. just like, gmail, googleplus, 
orkut.<br>
So how to achive this … if you can help me out by clearly mentioning it 
step by step, then it will be very easy for me to understand.</p>
<p>Thanks n Regards<br>
Sunil Singh
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338157", "Sunil Singh")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338159" class="comment ">
								<cite><span class="date">15 February 2012</span><a href="http://giamsatgps.vn/" rel="external nofollow" class="url">gps</a> says:</cite>
				<blockquote>
					<p>Thanks for great tutorial. I’m looking for a SSO solution for my
 websites but with no luck. As your mention, I will try in a different 
approach. Thanks again!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338159", "gps")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338167" class="comment ">
								<cite><span class="date">6 March 2012</span>ST says:</cite>
				<blockquote>
					<p>I’ve been using your SSO solution for about 6 months now. Some 
of our customers do have problems to login due to cookie restrictions. 
They use an open wireless network which you can find in hotels or other 
public locations. It seems that there are specific cookie restrictions 
which does not allow to share the cookie information from server to 
broker.</p>
<p>Does anybody else have problems with that?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338167", "ST")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338186" class="comment ">
								<cite><span class="date">3 April 2012</span>elier says:</cite>
				<blockquote>
					<p>hi, sorry i speak a little english</p>
<p>which are the required configuration for the sso server ?</p>
<p>i put it in a server with php 5.1 and it work good</p>
<p>i put it in a server with php 5.3 and it does not work</p>
<p>the session configuration in php.ini is the same in both servers, any other parameter is required ?</p>
<p>i have 3 clients and when the domain of sso server is the server with
 php 5.1 clients work good, but when i put in the client configuration 
the domain of sso server with php 5.3 it does not work.</p>
<p>thanks and sorry for my english
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-4/#comment-338186", "elier")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338187" class="comment ">
								<cite><span class="date">3 April 2012</span>elier says:</cite>
				<blockquote>
					<p>hi again, i have found the problem is with symbolic link, in the
 server with php 5.3, the sso server script does not create the symbolic
 link, someone know why does happen ?</p>
<p>thanks.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338187", "elier")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338188" class="comment ">
								<cite><span class="date">4 April 2012</span><a href="http://---/" rel="external nofollow" class="url">Gisela Maja</a> says:</cite>
				<blockquote>
					<p>Hi guys,</p>
<p>i have 2 online systems; joomla cms and xtcommerce shop and i am looking for sso for both system.</p>
<p>my goal is: i want to login into joomla and after on clicking on shop i want to login through sso into shop</p>
<p>also is there is a need, if user changes password on joomla, also password should be changed automatically in shop system.</p>
<p>so my question, what is to do, that i can implement your script to make a sso for my systems.</p>
<p>can you please provide me with more informations how to do!!</p>
<p>cheers</p>
<p>gisela maja
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338188", "Gisela Maja")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338191" class="comment ">
								<cite><span class="date">6 April 2012</span>flamencoman says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338187" rel="nofollow">elier</a>:<br>
I had  that problem and resolved it by creating directory with ‘Apache 
user’, by allowing to all to write to that directory and pointed 
session_save_path to that directory.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338191", "flamencoman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338192" class="comment ">
								<cite><span class="date">6 April 2012</span>flamencoman says:</cite>
				<blockquote>
					<p>Hi Arnold,<br>
I’ve implemented your SSO code and after one smaller fix it worked.<br>
This part created a problem for me:<br>
if (isset($_SESSION['client_addr']) &amp;&amp; $_SESSION['client_addr'] 
!= $_SERVER['REMOTE_ADDR']) {session_regenerate_id(true);}</p>
<p>Scenario:<br>
I logg in via broker_1.<br>
When broker redirects (with 307) first time to the SSO server, server 
puts in $_SESSION client’s remote addres and redirects  to broker’s 
login page after which “info()” method is called where broker checks via
 cURL if user is logged in.<br>
Problem is that when broker asks SSO server via “info()”, SSO server 
sees broker’s $_SERVER['REMOTE_ADDR'] and sets it in $_SESSION and that 
triggers session_regenerate_id(true);</p>
<p>Changes I’ve implemented:<br>
Broker SSO: serverCmd -&gt; added “client’s_remote address” as POST variable<br>
Server SSO: sessionStart -&gt; instead of asking if 
(isset($_SESSION['client_addr']) &amp;&amp; $_SESSION['client_addr'] != 
$_SERVER['REMOTE_ADDR']) {<br>
ask<br>
if (isset($_SESSION['client_addr']) &amp;&amp; $_SESSION['client_addr'] != $_REQUEST['remote_address']) {</p>
<p>I’m using PHP 5.3</p>
<p>What’s more interesting, “symbolic link” problem (that elier mentioned) exists when brokers are at the same server.<br>
Code with
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338192", "flamencoman")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338198" class="comment ">
								<cite><span class="date">12 April 2012</span><a href="http://--/" rel="external nofollow" class="url">Gisela Maja</a> says:</cite>
				<blockquote>
					<p>@flamencoman or others</p>
<p>can you please briefly help me how to testablish a single sign on 
between my 2 web-systems ( Joomla and XT-Commerce) so that there is only
 one login possible.</p>
<p>what is to do to make this issue happen??</p>
<p>note: you can also send me how-to description to: <a href="mailto:maja340@gmail.com">maja340@gmail.com</a></p>
<p>cheers</p>
<p>Gisela Maja
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338198", "Gisela Maja")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-338203" class="comment ">
								<cite><span class="date">18 April 2012</span>Mikesch says:</cite>
				<blockquote>
					<p>Good job!<br>
I did the SSO login with this script and everything works fine regarding the login.<br>
I also need to store information in my own session variables, if I put 
some information into session variables at the login and call for 
example at the main view the session variable, they are no more 
accessible.<br>
So how to tell a script so use the initialized session from SSO during login?</p>
<p>Thx in advance!
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338203", "Mikesch")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-340757" class="comment ">
								<cite><span class="date">15 May 2012</span>Thomas says:</cite>
				<blockquote>
					<p>I just released a PHP-based SSO server/client solution and would like feedback:</p>
<p><a href="http://barebonescms.com/documentation/sso/" rel="nofollow">http://barebonescms.com/documentation/sso/</a></p>
<p>This article did make me go “hmm” in a couple spots.  You say that 
there are many SSO solutions out there, yet my research turned up 
basically nothing – and still turns up nothing that even compares to 
what I’ve built.  You’ve got OpenID, OAuth 1 and 2, and not much else.  
The landscape is pretty barren.  And if you want to offer the user 
multiple sign in options at the server level, it gets even more sparse 
(HybridAuth and my solution are pretty much it).</p>
<p>You do address AJAX in this article but you are proxying requests to a
 server.  Anyone can build a proxy and, as you pointed out, you have to 
trust the servers that proxy the requests.  I don’t know how I feel 
about that, especially if you want to support mobile devices – you might
 want to consider the possibility that the application was poorly 
designed in the first place.  The SSO solution I’ve built saves the 
request ($_GET, $_POST, etc.), redirects to the server, the server 
manages the login process, and then the request is restored when the 
server redirects back to the client.  So you could author a comment or 
forum post and, once you completed the entire sign up and/or sign in 
process, the comment/forum post would finish posting as if you had been 
logged in the entire time.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-340757", "Thomas")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-340813" class="comment ">
								<cite><span class="date">15 May 2012</span>witi says:</cite>
				<blockquote>
					<p>Hello ppl,</p>
<p>First of all, thx for that library that is very powerful ! We are 
using the Ajax implementation on our network and just finished to 
install it.<br>
After several days of test / bug / debug, we notice that broker name SHOULD NOT contains ‘-’ because of<br>
<code lang="php"><br>
preg_match('/^SSO-(\w*+)-(\w*+)-([a-z0-9]*+)$/', $_REQUEST[session_name()], $matches)<br>
</code></p>
<p>In server’s sessionStart() function.</p>
<p>Just in case, if some of you are trying to use it with a broker name like xxxxx-xxxxx ;)</p>
<p>Cheers
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-340813", "witi")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-340852" class="comment highlighted">
								<cite><span class="date">15 May 2012</span><a href="http://www.jasny.net/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-340757" rel="nofollow">Thomas</a>: Cool that you’ve implemented an SSO solution. I’ve just browsed through it, so far it looks pretty good.</p>
<p>You’ve got a number of solutions based on SAML like <a href="http://simplesamlphp.org/" rel="nofollow">http://simplesamlphp.org</a> and a whole number of things in Java. There definitively space for easier and better libs though.</p>
<p>It depends on your use case. If you choose to redirect the client to 
the SSO server, you can easily choose to have the user login directly 
instead of through the broker. However, you can also just load an image 
from the SSO server and proxy the authentication, so the client does not
 have to leave the page. You can choose which of the 2 ways you prefer, 
other SSO implementations (including yours) don’t give you that option 
:(.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-340852", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-340853" class="comment highlighted">
								<cite><span class="date">15 May 2012</span><a href="http://www.jasny.net/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338192" rel="nofollow">flamencoman</a>: Forgot to say thanks… Thanks :)
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-340853", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-346673" class="comment ">
								<cite><span class="date">4 June 2012</span>Robert says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-338192" rel="nofollow">flamencoman</a>:  hmm how can i added “client’s_remote address”? im amateur in SSO
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-346673", "Robert")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-348692" class="comment ">
								<cite><span class="date">15 June 2012</span>Umesh Kulkarni says:</cite>
				<blockquote>
					<p>Hi Arnold Daniels,</p>
<p>Demo<br>
Broker ‘Alex’<br>
Broker ‘Binck’<br>
AJAX broker – created by Lukasz ‘Uzza’ Lipinski using Ajax.org PlatForm.</p>
<p>Play around, logging in and out at different brokers. Refresh the other after. Available users:<br>
jan / jan1<br>
peter / peter1<br>
bart / bart1<br>
henk / henk1</p>
<p>These demo links are not working.<br>
Can you please let me know which links should I use to see the demo?</p>
<p>Thanks,<br>
Umesh Kulkarni
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-348692", "Umesh Kulkarni")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-353536" class="comment ">
								<cite><span class="date">14 July 2012</span><a href="http://www.unfocused.org/" rel="external nofollow" class="url">Jmatt</a> says:</cite>
				<blockquote>
					<p>@ Witi</p>
<p>Untested, but this might work.</p>
<p><code lang="php"><br>
preg_match('/^SSO\-(\w*+)\-(\w*+)\-([a\-z0-9]*+)$/', $_REQUEST[session_name()], $matches)<br>
</code>
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-353536", "Jmatt")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-353571" class="comment ">
								<cite><span class="date">18 October 2012</span>Bill says:</cite>
				<blockquote>
					<p>I’m wondering if this is still working and what php applications
 are working. Any further development or better solutions available now?
 I’d like to integrate Drupal, Magento and WordPress into a SSO solution
 but I realize all the synching, updating, ect that would have to occur 
between the different “application architectures for customer roles 
(username, password, ect)”… Just wondering if anyone’s trying to do 
anything like that out there… </p>
<p>I have a partial working solutions for wordpress/mage but syncing customers and password updates not so much..
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-353571", "Bill")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-353572" class="comment highlighted">
								<cite><span class="date">22 October 2012</span><a href="http://www.jasny.net/" rel="external nofollow" class="url">Arnold Daniels</a> says:</cite>
				<blockquote>
					<p>@Bill. The demo’s aren’t working anymore. I should really fix 
them. This is basically just a proof of concept and far from a solid 
lib. I planned to create a lib, but it’s unlikely I’ll get around to it 
soon.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-353572", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-354512" class="comment ">
								<cite><span class="date">30 January 2013</span>Whoops says:</cite>
				<blockquote>
					<p>the demo links no longer seem to be working….?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354512", "Whoops")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-354516" class="comment highlighted">
								<cite><span class="date">15 February 2013</span>Arnold Daniels says:</cite>
				<blockquote>
					<p>@Whoops I’ll fix it soon.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354516", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-354657" class="comment ">
								<cite><span class="date">29 April 2013</span><a href="http://www.aceonics.com/" rel="external nofollow" class="url">Jeet Chaudhari</a> says:</cite>
				<blockquote>
					<p>Really Thank You…! </p>
<p>I was struggling from many days to implement SSO system for my 
website and my other websites which are in development. I tried many 
things but did not get success. </p>
<p>I even tried installing barebones sso, but it was too complicated 
with so many tables in database, as I already have all website’s user 
database and session database developed, with their classes.</p>
<p>This is the place where I found exactly what I was searching for, an 
easy code to understand and modify. I implemented it on my website, But I
 am getting one small problem.</p>
<p>When I visit the page which just checks if user is logged or not, (On
 this page I do not want to force user to login, so removed redirect) It
 returns 406 error, which says invalid checksum (The generate attach 
checksum returns null). If I refresh same page again I was visiting, 
then it works. </p>
<p>If you can tell me, why 1st time it gets invalid checksum when user 
isn’t logged in, I would be really thankful. to avoid this, should I 
just put redirect statement, instead of header 406? Or I did something 
wrong in checking if user is logged in?</p>
<p>This is the code I used to check if person is online or not.</p>
<p>function isLoginValid () {<br>
$sso = new SingleSignOn_Broker();<br>
$user = $sso-&gt;getInfo();</p>
<p>if (!$user) {<br>
    return false;<br>
} else {<br>
    return true;<br>
}
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354657", "Jeet Chaudhari")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-354680" class="comment ">
								<cite><span class="date">26 May 2013</span>Kyle says:</cite>
				<blockquote>
					<p>I tried going to the github to download the SSO you wrote but 
cannot find it on there….did you remove this?  Is there still a way to 
get it?
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354680", "Kyle")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-354684" class="comment highlighted">
								<cite><span class="date">28 May 2013</span>Arnold Daniels says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354680" rel="nofollow">Kyle</a>: GitHub changed the download section. I’ve fixed the link.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-354684", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-355787" class="comment ">
								<cite><span class="date">1 June 2013</span>David Baker says:</cite>
				<blockquote>
					<p>We are looking to implement an SSO piece from a PHP marketing site to our ASP.NET enterprise portal.<br>
In other words, a user would be on a PHP marketing page, be able to put 
in their username and password in the appropriate fields and be 
redirected, authenticated (or not) against our other site user database.<br>
Is this something you could assist / consult with us on?  Fee?<br>
Thanks in advance –<br>
David
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-355787", "David Baker")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-362752" class="comment ">
								<cite><span class="date">3 July 2013</span>nhymxu says:</cite>
				<blockquote>
					<p>Some user manager system have two part: client site and server site, work with API (return json, xml, …)</p>
<p>Why you need three part: client, ajax, server?</p>
<p>I don’t know about this?<br>
sorry because my english not well.</p>
<p>Can you talk about this?</p>
<p>Thanks you
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362752", "nhymxu")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-362770" class="comment ">
								<cite><span class="date">15 July 2013</span>OSS says:</cite>
				<blockquote>
					<p>Hello Arnold </p>
<p>Thanks for this article and its nice code </p>
<p>i wonder if i can use your code in two different virtual hosts : the 
first one is the broker and the second one will be the server side. </p>
<p>Thanks and good continuation .
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362770", "OSS")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-362850" class="comment ">
								<cite><span class="date">2 October 2013</span>conglin.deng says:</cite>
				<blockquote>
					<p>hi,</p>
<p>i have a website want to use this php login framework, but encounter a
 problem, that any page need login, so i change the sso.php below line 
code. just refer U. make the sessionToken not change.</p>
<p>  56         $this-&gt;sessionToken = ’476bdd2c2e296936a91a411dfefdb38c’;</p>
<p> 53     public function __construct($auto_attach=true)<br>
  54     {<br>
  55         #if (isset($_COOKIE['session_token'])) $this-&gt;sessionToken = $_COOKIE['session_token'];<br>
  56         $this-&gt;sessionToken = ’476bdd2c2e296936a91a411dfefdb38c’;<br>
  57<br>
  58         if ($auto_attach &amp;&amp; !isset($this-&gt;sessionToken)) {<br>
  59             header(“Location: ” . $this-&gt;getAttachUrl() . 
“&amp;redirect=”. urlencode(“http://{$_SERVER["SERVER_NAME"]}{     
$_SERVER["REQUEST_URI"]}”), true, 307);<br>
  60             exit;<br>
  61         }<br>
  62     }
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362850", "conglin.deng")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-362851" class="comment ">
								<cite><span class="date">2 October 2013</span>conglin.deng says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362850" rel="nofollow">conglin.deng</a>: </p>
<p>just ignore what i say，sorry， the method have problem。
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362851", "conglin.deng")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-362877" class="comment ">
								<cite><span class="date">15 November 2013</span>udaya says:</cite>
				<blockquote>
					<p>Hi,</p>
<p>I have three different PHP web application and planning to implement 
SSO for these. Could you please explain how to integrate your code to 
make it working. Thanks in advance.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-362877", "udaya")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-363021" class="comment ">
								<cite><span class="date">11 April 2014</span>Wahid says:</cite>
				<blockquote>
					<p>Hi Arnold,</p>
<p>I’m teaching the SSO and I’m so interest your article about the SSO.</p>
<p>My questions are:<br>
1. How to implement the SSO using the user existing in database?<br>
I am changing the code on server\sso.php like below, but it is still not work.<br>
protected static $users = “select * from user”;</p>
<p>2. How to implement on 2 (two) different domains?</p>
<p>Any idea for me. Thank you so much.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-363021", "Wahid")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-363026" class="comment ">
								<cite><span class="date">12 April 2014</span>Romain says:</cite>
				<blockquote>
					<p>Hi Arnold.<br>
Thank you very much for the download, it seem to be exactly what I need.<br>
But I have the same problem of remo:</p>
<p>—<br>
remo said:<br>
Hi arnold, thanx for the download. Im not getting any errors while 
accessing the two different brokers from my client but they are being 
independent. when i login at one broker and refresh the other broker 
page it still shows the login page, not showing the user info. im not 
able to understand where it is going wrong. please help.<br>
—</p>
<p>But I don’t understand your answer :</p>
<p>—<br>
Arnold said:<br>
have a look at the cookies from the SSO server. See if the session file 
is created correctly and if there is symlink linking to it.<br>
Also there are issues when running the broker or server on your local computer.<br>
—</p>
<p>Where can I check if the session file is created?<br>
I don’t understand what can I do to fixe the problem. I hope you can help me.<br>
Thanks
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-363026", "Romain")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-363031" class="comment highlighted">
								<cite><span class="date">13 April 2014</span>Arnold Daniels says:</cite>
				<blockquote>
					<p>@<a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-7/#comment-363026" rel="nofollow">Romain</a>:
 Check your session directory. The directory is configured in php.ini by
 session.save_path. (Probably /tmp or /var/lib/php5 under linux).
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-363031", "Arnold Daniels")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-379179" class="comment ">
								<cite><span class="date">6 August 2014</span><a href="http://ntc113.wordpress.com/2014/08/06/simple-single-sign-on-for-php/" rel="external nofollow" class="url">Simple Single Sign-On for PHP | Nguyễn Tiến Công</a> says:</cite>
				<blockquote>
					<p>[…] source: <a href="http://www.jasny.net/articles/simple-single-sign-on-for-php/" rel="nofollow">http://www.jasny.net/articles/simple-single-sign-on-for-php/</a> […]</p>
				</blockquote>
			</li>
					<li id="comment-379549" class="comment ">
								<cite><span class="date">7 August 2014</span><a href="http://loginh.com/sign-in-using-ajax/" rel="external nofollow" class="url">sign in using ajax</a> says:</cite>
				<blockquote>
					<p>[…] Simple Single Sign-On for PHP (Ajax compatible) – Jasny … […]</p>
				</blockquote>
			</li>
					<li id="comment-395627" class="comment ">
								<cite><span class="date">18 September 2014</span><a href="http://cgi.members.interq.or.jp/ox/shogo/ONEE/g_book/g_book.cgi" rel="external nofollow" class="url">can you make money minecraft Server</a> says:</cite>
				<blockquote>
					<p>Hurrah! Finally I got a webpage from where I can genuinely get useful facts regarding my study and knowledge.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-395627", "can you make money minecraft Server")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-408245" class="comment ">
								<cite><span class="date">26 September 2014</span><a href="http://people.tribe.net/54ffdd21-07ac-4388-95a3-9672d71b9b63/blog/b961ef16-4e6f-4f96-b6f5-76cbbdf5a490" rel="external nofollow" class="url">Willa</a> says:</cite>
				<blockquote>
					<p>Otrohet erbjuder dig spänning som Ԁu länge har missat.<br>
Upptäck njutningen av att se din partner іn action,alltså knulla med 
någon annan, ɗu komme finna diig själv få deen ultimata kicken av 
erotisk njutning när ɗu ѕеr din partner blii nullad av еn främling.</p>
<p>Bara tanken av att träffa еn total främling för еn het knullträff på ett kanske sliskigt hotellrum borde få vilken kille som<br>
helst att få ståkuk.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-408245", "Willa")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-411482" class="comment ">
								<cite><span class="date">29 September 2014</span><a href="http://www.fit2dmax.com/fitcommunity/groups/raising-your-garage-door-repair-awareness/" rel="external nofollow" class="url">garage door opener Ventura</a> says:</cite>
				<blockquote>
					<p>Hello it’s me, I am also visiting this website on a regular basis, this<br>
web page is in fact fastidious and the people are really sharing nice thoughts.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-411482", "garage door opener Ventura")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-412008" class="comment ">
								<cite><span class="date">29 September 2014</span><a href="http://imgur.com/a/WsboL" rel="external nofollow" class="url">imgur.com</a> says:</cite>
				<blockquote>
					<p>Hi all, here every one is sharing these kinds of experience, so it’s<br>
pleasant to read this weblog, and I used to pay a visit this webpage all the time.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-412008", "imgur.com")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-413567" class="comment ">
								<cite><span class="date">1 October 2014</span><a href="http://kennyijvq.soup.io/post/458668701/Som-de-fleste-elementer-i-denne-tidslinjen" rel="external nofollow" class="url">dating norge</a> says:</cite>
				<blockquote>
					<p>Jeg liker ikke kvinner som ikke vet hva ɗe vil men trenger damer som еr tent på Sex<br>
og haar lyst til å prøve ut nye ting. Det ƙan også hende<br>
at det renner noe ut (særlig om ԁu har sprutet sæd inn) når dս tar 
pikken ut igjen. Lɑ penis trykke mօt åpningen en god stund, oog når ɗen 
soom<br>
skal penetrere еr klar trekker vedkommende<br>
pusten dypt inn og puster ut igjen; ”schwupp” så<br>
metter penis innafor.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-413567", "dating norge")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
					<li id="comment-420018" class="comment ">
								<cite><span class="date">11 October 2014</span><a href="http://vimeo.com/108186517" rel="external nofollow" class="url">candy crush cheats level 658</a> says:</cite>
				<blockquote>
					<p>Hi there everyone, it’s my fiest visit at this site,<br>
and paragraph is truly fruitful in favor of me, keep up posting these types of content.
</p><div class="yarr"><span onclick='yus_replyTo("http://www.jasny.net/articles/simple-single-sign-on-for-php/comment-page-5/#comment-420018", "candy crush cheats level 658")' title="Reply to this comment"><img alt="Reply" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/reply.png">Reply</span></div>
				</blockquote>
			</li>
				</ol>
	</div><!-- close:comments -->
 	<div id="commentform">
		<h3>Write a comment:</h3>
			<form action="http://www.jasny.net/wp-comments-post.php" method="post" name="comment-form">
					<p>
				<input name="author" id="author" class="input-text" size="22" type="text">
				<label for="author">Name (needed)</label>
			</p>
			<p>
				<input name="email" id="email" class="input-text" size="22" type="text">
				<label for="email">Email (needed but it will not be published)</label>
			</p>
			<p>
				<input name="url" id="url" class="input-text" size="22" type="text">
				<label for="url">Website (if you have one)</label>
			</p>
					<p>
				<textarea name="comment" id="comment" cols="100%" rows="10"></textarea>
			</p>
			<p class="input-submit">
				<input name="submit-comment" id="submit-comment" value="comment" type="submit">
				<input name="comment_post_ID" value="168" type="hidden">
			</p>
		<p style="display: none;"><input id="akismet_comment_nonce" name="akismet_comment_nonce" value="d7a9dd2f49" type="hidden"></p> 
<style>
.yarr { visibility:hidden; position:relative }
.yarr span { cursor:pointer; position:absolute; bottom:0; right:0 }
.yarr img { vertical-align:-2px }
.comment:hover .yarr { visibility:visible }
</style>
<script type="text/javascript">
	//<![CDATA[
	function yus_replyTo(commentID, author) {
		var inReplyTo = '@<a href="' + commentID + '">' + author + '<\/a>: ';
		var myField;
		if (document.getElementById('comment') && document.getElementById('comment').type == 'textarea') {
			myField = document.getElementById('comment');
		} else {
			return false;
		}
		if (document.selection) {
			myField.focus();
			sel = document.selection.createRange();
			sel.text = inReplyTo;
			myField.focus();
		}
		else if (myField.selectionStart || myField.selectionStart == '0') {
			var startPos = myField.selectionStart;
			var endPos = myField.selectionEnd;
			var cursorPos = endPos;
			myField.value = myField.value.substring(0, startPos) + inReplyTo + myField.value.substring(endPos, myField.value.length);
			cursorPos += inReplyTo.length;
			myField.focus();
			myField.selectionStart = cursorPos;
			myField.selectionEnd = cursorPos;
		}
		else {
			myField.value += inReplyTo;
			myField.focus();
		}
	}
	//]]>
</script>
                <script type="text/javascript">
                    var RecaptchaOptions = { theme : 'blackglass', lang : 'en' , tabindex : 5 };
                </script><script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/challenge"></script><script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/recaptcha.js"></script><div class=" recaptcha_nothad_incorrect_sol recaptcha_isnot_showing_audio" id="recaptcha_widget_div" style=""><div id="recaptcha_area"><table id="recaptcha_table" class="recaptchatable recaptcha_theme_blackglass"> <tbody><tr> <td colspan="6" class="recaptcha_r1_c1"></td> </tr> <tr> <td class="recaptcha_r2_c1"></td> <td colspan="4" class="recaptcha_image_cell"><center><div style="width: 300px; height: 57px;" id="recaptcha_image"><img id="recaptcha_challenge_image" alt="reCAPTCHA challenge image" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/image.jpg" height="57" width="300"></div></center></td> <td class="recaptcha_r2_c2"></td> </tr> <tr> <td rowspan="6" class="recaptcha_r3_c1"></td> <td colspan="4" class="recaptcha_r3_c2"></td> <td rowspan="6" class="recaptcha_r3_c3"></td> </tr> <tr> <td rowspan="3" class="recaptcha_r4_c1" height="49"> <div class="recaptcha_input_area"> <span style="display: none;" id="recaptcha_challenge_field_holder"><input name="recaptcha_challenge_field" id="recaptcha_challenge_field" value="03AHJ_Vut1ERYhX--fwz2Lkpmxk4XxALU8BUCDtGo0n1fvNSzt5jBCD4QIPMQWxJSG-M8tnHS_bKvTgP9H1G-Cg_i6Ptm2FZPlzzjwYPkjSIUYUWNHiPTcys1E60rJvquM7MxayIACjwHNPtT-FQqTyPkukyYNH0a3YH5nBY6hPBoh9aRyIrvhSSfMsG10djcETbMmNPkqpg38ugsLZP-xA8DUqYkzsktLRIhSBBQeA8LoN-HprHST840-f2qzEC6aCLkwiEc7DoUD7JjlMRp04xQ66PbVw1L6fQsHxxH0qbQpXG0tH-9cP0w" type="hidden"></span><input tabindex="5" autocomplete="off" name="recaptcha_response_field" id="recaptcha_response_field" autocorrect="off" autocapitalize="off" placeholder="Type the text" type="text"> <span tabindex="9" id="recaptcha_privacy" class="recaptcha_only_if_privacy"><a target="_blank" href="http://www.google.com/intl/en/policies/">Privacy &amp; Terms</a></span> </div> </td> <td rowspan="4" class="recaptcha_r4_c2"></td> <td><a tabindex="6" title="Get a new challenge" id="recaptcha_reload_btn"><img alt="Get a new challenge" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/refresh.gif" id="recaptcha_reload" height="17" width="25"></a></td> <td rowspan="4" class="recaptcha_r4_c4"></td> </tr> <tr> <td><a tabindex="7" title="Get an audio challenge" id="recaptcha_switch_audio_btn" class="recaptcha_only_if_image"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/audio.gif" id="recaptcha_switch_audio" alt="Get an audio challenge" height="16" width="25"></a><a tabindex="8" title="Get a visual challenge" id="recaptcha_switch_img_btn" class="recaptcha_only_if_audio"><img src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/text.gif" id="recaptcha_switch_img" alt="Get a visual challenge" height="16" width="25"></a></td> </tr> <tr> <td><a tabindex="9" title="Help" id="recaptcha_whatsthis_btn"><img alt="Help" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/help.gif" id="recaptcha_whatsthis" height="16" width="25"></a></td> </tr> <tr> <td class="recaptcha_r7_c1"></td> <td class="recaptcha_r8_c1"></td> </tr> </tbody></table> </div></div>

	<noscript>
  		<iframe src="http://www.google.com/recaptcha/api/noscript?k=6LcBbPcSAAAAAM2whGdmYf8NN9GmM_u8gKSoLmT2" height="300" width="500" frameborder="0"></iframe><br/>
  		<textarea name="recaptcha_challenge_field" rows="3" cols="40"></textarea>
  		<input type="hidden" name="recaptcha_response_field" value="manual_challenge"/>
	</noscript>                        <div id="recaptcha-submit-btn-area">&nbsp;</div>
                        <noscript>
                         <style type='text/css'>#submit {display:none;}</style>
                         <input name="submit" type="submit" id="submit-alt" tabindex="6" value="Submit Comment"/> 
                        </noscript><p style="display: none;"></p>		</form>
	<input id="ak_js" name="ak_js" value="1413062265565" type="hidden"></div><!-- close:commentform -->
						</div>
		<div id="sidebar" class="clearfix">
	<div id="sb-1">
					</div><!-- close:sb-1 -->
	<div id="sb-2">
					</div>
</div>	</div>
	<div id="footer">
		<a href="#" class="alignright">Back to top ↑</a>
		<p><a href="http://www.jasny.net/">Jasny · web development</a> proudly powered by <a href="http://www.wordpress.org/">Wordpress</a> and <a href="http://jarederickson.com/2011/min-a-free-wordpress-minimal-theme/">min Theme</a></p>
	</div><!-- close:footer -->
</div><!-- close:wrapper -->




<script type="text/javascript"><!--
wpa2a.targets=[
{title:'Simple Single Sign-On for PHP (Ajax compatible)',url:'http://www.jasny.net/articles/simple-single-sign-on-for-php/'}];
wpa2a.html_done=true;if(wpa2a.script_ready&&!wpa2a.done)wpa2a.init();wpa2a.script_load();
//--></script>
                <script type="text/javascript">
                var sub = document.getElementById('submit');
                document.getElementById('recaptcha-submit-btn-area').appendChild (sub);
                document.getElementById('submit').tabIndex = 6;
                if ( typeof _recaptcha_wordpress_savedcomment != 'undefined') {
                        document.getElementById('comment').value = _recaptcha_wordpress_savedcomment;
                }
                document.getElementById('recaptcha_table').style.direction = 'ltr';
                </script><script type="text/javascript" src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/form.js"></script>

<div style="position: static;"><div class="a2a_overlay" id="a2apage_overlay"></div><div class="a2a_menu a2a_full" id="a2apage_full"><div class="a2a_full_header"><div id="a2apage_find_container" class="a2a_menu_find_container"><input id="a2apage_find" class="a2a_menu_find" onclick="a2a.focus_find()" onkeyup="a2a.do_find()" autocomplete="off" title="Find any service" type="text"><span id="a2apage_find_icon" class="a2a_i_find" onclick="a2a.focus_find()"><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="16px" height="16px" viewBox="8 8 16 16"><path fill="#0166FF" d="M21.636,20.553l-3.291-3.291c0.536-0.753,0.858-1.667,0.858-2.661c0-2.542-2.061-4.602-4.602-4.602C12.06,9.999,10,12.059,10,14.601c0,2.541,2.06,4.602,4.602,4.602c0.994,0,1.907-0.32,2.659-0.856l3.291,3.29c0.401,0.402,0.968,0.486,1.268,0.184C22.119,21.521,22.036,20.953,21.636,20.553z M14.602,17.9c-1.823,0-3.3-1.477-3.3-3.3s1.477-3.3,3.3-3.3s3.3,1.477,3.3,3.3S16.424,17.9,14.602,17.9z"></path></svg></span></div></div><div class="a2a_full_services" id="a2apage_full_services"><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_facebook">Facebook</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_twitter">Twitter</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_google_plus">Google+</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_pinterest">Pinterest</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_linkedin">LinkedIn</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_email">Email</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_reddit">Reddit</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_tumblr">Tumblr</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_wordpress">WordPress</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_stumbleupon">StumbleUpon</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_delicious">Delicious</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_digg">Digg</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_google">Google Bookmarks</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_yahoo">Yahoo Bookmarks</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_whatsapp">WhatsApp</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_evernote">Evernote</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_line">Line</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_wanelo">Wanelo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_app_net">App.net</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_buffer">Buffer</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_xing">XING</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_bebo">Bebo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_orkut">Orkut</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_mixi">Mixi</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_vk">VK</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_pocket">Pocket</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_gmail">Google Gmail</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_mendeley">Mendeley</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_yahoo">Yahoo Mail</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_pinboard">Pinboard</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_outlook_com">Outlook.com</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_box">Box.net</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_aol">AOL Mail</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_instapaper">Instapaper</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_y18">Hacker News</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_springpad">Springpad</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_myspace">MySpace</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_flipboard">Flipboard</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_arto">Arto</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_aim">AIM</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_yim">Yahoo Messenger</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_mail_ru">Mail.Ru</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_plurk">Plurk</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_diaspora">Diaspora</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_fark">Fark</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_blogger">Blogger Post</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_typepad">TypePad Post</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_kindle">Kindle It</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_sina_weibo">Sina Weibo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_baidu">Baidu</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_netlog">Netlog</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_citeulike">CiteULike</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_jumptags">Jumptags</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_funp">FunP</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_phonefavs">PhoneFavs</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_xerpi">Xerpi</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_netvouz">Netvouz</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_diigo">Diigo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_bibsonomy">BibSonomy</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_blogmarks">BlogMarks</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_startaid">StartAid</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_khabbr">Khabbr</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_meneame">Meneame</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_yoolink">Yoolink</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_bookmarks_fr">Bookmarks.fr</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_technotizie">Technotizie</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_newsvine">NewsVine</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_friendfeed">FriendFeed</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_protopage">Protopage Bookmarks</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_blinklist">Blinklist</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_webnews">Webnews</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_segnalo">Segnalo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_pusha">Pusha</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_youmob">YouMob</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_slashdot">Slashdot</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_allvoices">Allvoices</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_jamespot">Jamespot</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_twiddla">Twiddla</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_linkagogo">LinkaGoGo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_nowpublic">NowPublic</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_livejournal">LiveJournal</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_linkatopia">Linkatopia</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_buddymarks">BuddyMarks</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_viadeo">Viadeo</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_wists">Wists</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_sitejot">SiteJot</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_dzone">DZone</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_care2">Care2 News</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_bitty">Bitty Browser</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_odnoklassniki">Odnoklassniki</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_symbaloo">Symbaloo Feeds</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_folkd">Folkd</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_newstrust">NewsTrust</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_amazon">Amazon Wish List</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_printfriendly">PrintFriendly</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_default">Wykop</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_tuenti">Tuenti</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_rediff">Rediff MyPage</span></a><i class="a2a_i"></i><i class="a2a_i"></i></div><div class="a2a_full_footer"><a href="https://www.addtoany.com/" title="Share Buttons" target="_blank"><span class="a2a_i_a2a_sm">AddToAny</span></a></div></div><div id="a2apage_dropdown" class="a2a_menu a2a_mini" onmouseover="a2a.onMouseOver_stay()" onmouseout="a2a.onMouseOut_delay()" style="display:none"><div id="a2apage_title_container" class="a2a_menu_title_container" style="display:none"><input id="a2apage_title" class="a2a_menu_title"></div><div class="a2a_mini_services" id="a2apage_mini_services"><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_facebook">Facebook</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_twitter">Twitter</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_google_plus">Google+</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_pinterest">Pinterest</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_linkedin">LinkedIn</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_email">Email</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_reddit">Reddit</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_tumblr">Tumblr</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_wordpress">WordPress</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_stumbleupon">StumbleUpon</span></a></div><div id="a2apage_cols_container" class="a2a_cols_container"><div class="a2a_col1" id="a2apage_col1"></div><div id="a2apage_2_col1" style="display:none"><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_gmail">Google Gmail</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_yahoo">Yahoo Mail</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_outlook_com">Outlook.com</span></a><a target="_blank" href="http://www.jasny.net/" class="a2a_i" rel="nofollow"><span class="a2a_i_aol">AOL Mail</span></a><a id="a2apage_any_email" target="_blank" href="http://www.jasny.net/" class="a2a_i a2a_emailer" rel="nofollow"><span class="a2a_i_email">Any email</span></a><a id="a2apage_email_client" target="" href="http://www.jasny.net/" class="a2a_i a2a_emailer a2a_email_client" rel="nofollow"><span class="a2a_i_email">Email app</span></a></div><div class="a2a_clear"></div></div><div class="a2apage_wide a2a_wide"><a href="" id="a2apage_show_more_less" class="a2a_menu_show_more_less a2a_more" onmouseover="img=this.firstChild;if(a2a.c.color_arrow_hover=='fff'){if(img.className.indexOf('_wt')==-1)img.className+='_wt'}else img.className=img.className.replace(/_wt/,'')" onmouseout="img=this.firstChild;if(a2a.c.color_arrow=='fff'){if(img.className.indexOf('_wt')==-1)img.className+='_wt'}else img.className=img.className.replace(/_wt/,'')" title="Show all"><span class="a2a_i_a2a">More…</span></a></div></div><div style="height: 1px; width: 1px; position: absolute; z-index: 100000; top: 0px; visibility: hidden;"><iframe src="Simple%20Single%20Sign-On%20for%20PHP%20%28Ajax%20compatible%29%20-%20Jasny%20%C2%B7%20web%20development_files/sm11.htm" allowtransparency="true" transparency="true" title="AddToAny Utility Frame" style="height: 1px; width: 1px; border: 0px none; left: 0px; top: 0px; position: absolute; z-index: 100000; display: none;" id="a2apage_sm_ifr" height="1" width="1" frameborder="0"></iframe></div></div></body></html>